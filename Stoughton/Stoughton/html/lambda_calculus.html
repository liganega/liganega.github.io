<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"/>
<link href="coqdoc.css" rel="stylesheet" type="text/css"/>
<title>lambda_calculus</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">Library lambda_calculus</h1>

<div class="code">
</div>

<div class="doc">
<a name="lab3"></a><h1 class="section">Untyped Lambda Calculus</h1>

</div>
<div class="code">

<br/>
<span class="id" type="keyword">Set</span> <span class="id" type="keyword">Implicit</span> <span class="id" type="var">Arguments</span>.<br/>

<br/>
<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Logic.FunctionalExtensionality.html#"><span class="id" type="library">Coq.Logic.FunctionalExtensionality</span></a>.<br/>
<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Import</span> <a class="idref" href="lists_decidable.html#"><span class="id" type="library">lists_decidable</span></a>.<br/>
<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Import</span> <a class="idref" href="fresh_variables.html#"><span class="id" type="library">fresh_variables</span></a>.<br/>
<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Import</span> <a class="idref" href="functions_extra.html#"><span class="id" type="library">functions_extra</span></a>.<br/>
<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Import</span> <a class="idref" href="case_tac.html#"><span class="id" type="library">case_tac</span></a>.<br/>

<br/>
</div>

<div class="doc">
The current work is a formalization of Allen Stoughton's paper
   <i>Substitution Revisited</i>.

<br/> <br/>
    The structure of our work is the same as that of Stoughton.
    Even the numbering is the same 
</div>
<div class="code">

<br/>
</div>

<div class="doc">
<a name="lab4"></a><h2 class="section">1. Introduction</h2>

</div>
<div class="code">

<br/>
</div>

<div class="doc">
The characteristics of her paper are
<ul>
<li> using one-sorted variable names;

</li>
<li> using simultaneous substitution instead of single substitution;

</li>
<li> using unrestricted substitution for the untyped lambda calculus. 
</li>
</ul>

</div>
<div class="code">

<br/>
</div>

<div class="doc">
<a name="lab5"></a><h2 class="section">2. Definitions</h2>

</div>
<div class="code">

<br/>
</div>

<div class="doc">
<a name="lab6"></a><h3 class="section">Untyped Lambda Terms</h3>

</div>
<div class="code">

<br/>
</div>

<div class="doc">
There is only one-sorted variable names. That is, no distinction
   between local and global variables.

<br/> <br/>
   For simplicity, we use natural numbers to denote variable names.
   However, any type satisfying <span class="inlinecode"><span class="id" type="var">DecidableTypeExt</span></span> could do the same
   job.

<br/> <br/>
   The module <span class="inlinecode"><span class="id" type="var">Nat</span></span> is defined in the module <span class="inlinecode"><span class="id" type="var">fresh_variables.v</span></span>. 
</div>
<div class="code">

<br/>
</div>

<div class="doc">
Importing the library about decidable <span class="inlinecode"><span class="id" type="var">In</span></span> predicate and
   functional extensionality 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Module</span> <span class="id" type="keyword">Import</span> <a name="Nat_dec"><span class="id" type="module">Nat_dec</span></a> := <a class="idref" href="functions_extra.html#"><span class="id" type="module">FunctionExtra</span></a> <a class="idref" href="fresh_variables.html#"><span class="id" type="module">Nat</span></a>.<br/>

<br/>
</div>

<div class="doc">
Notation for the set of variables 
</div>
<div class="code">

<br/>
<span class="id" type="var">Notation </span><a name="var"><span class="id" type="abbreviation">var</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" type="inductive">nat</span></a>.<br/>

<br/>
</div>

<div class="doc">
The type of terms 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Inductive</span> <a name="term"><span class="id" type="inductive">term</span></a> : <span class="id" type="keyword">Set</span> :=<br/>
&nbsp;&nbsp;<a name="Var"><span class="id" type="constructor">Var</span></a> : <a class="idref" href="lambda_calculus.html#var"><span class="id" type="abbreviation">var</span></a> -&gt; <a class="idref" href="lambda_calculus.html#term"><span class="id" type="inductive">term</span></a><br/>
| <a name="App"><span class="id" type="constructor">App</span></a> : <a class="idref" href="lambda_calculus.html#term"><span class="id" type="inductive">term</span></a> -&gt; <a class="idref" href="lambda_calculus.html#term"><span class="id" type="inductive">term</span></a> -&gt; <a class="idref" href="lambda_calculus.html#term"><span class="id" type="inductive">term</span></a><br/>
| <a name="Lam"><span class="id" type="constructor">Lam</span></a> : <a class="idref" href="lambda_calculus.html#var"><span class="id" type="abbreviation">var</span></a> -&gt; <a class="idref" href="lambda_calculus.html#term"><span class="id" type="inductive">term</span></a> -&gt; <a class="idref" href="lambda_calculus.html#term"><span class="id" type="inductive">term</span></a>.<br/>

<br/>
</div>

<div class="doc">
Notational convention:
<ul>
<li> u, v, w, x ,y range over variables.

</li>
<li> M, N range over terms.

</li>
<li> L, L' range over finite lists. 
</li>
</ul>

</div>
<div class="code">

<br/>
</div>

<div class="doc">
<a name="lab7"></a><h3 class="section">Free Variables</h3>

</div>
<div class="code">

<br/>
<span class="id" type="keyword">Fixpoint</span> <a name="FV"><span class="id" type="definition">FV</span></a> (<span class="id" type="var">M</span> : <a class="idref" href="lambda_calculus.html#term"><span class="id" type="inductive">term</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Init.Datatypes.html#list"><span class="id" type="inductive">list</span></a> <a class="idref" href="lambda_calculus.html#var"><span class="id" type="abbreviation">var</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">M</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="lambda_calculus.html#Var"><span class="id" type="constructor">Var</span></a> <span class="id" type="var">x</span>     =&gt; <span class="id" type="var">x</span> <a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Init.Datatypes.html#:list_scope:x_'::'_x"><span class="id" type="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" type="constructor">nil</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="lambda_calculus.html#App"><span class="id" type="constructor">App</span></a> <span class="id" type="var">M0</span> <span class="id" type="var">M1</span> =&gt; <a class="idref" href="lambda_calculus.html#FV"><span class="id" type="definition">FV</span></a> <span class="id" type="var">M0</span> <a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Init.Datatypes.html#:list_scope:x_'++'_x"><span class="id" type="notation">++</span></a> <a class="idref" href="lambda_calculus.html#FV"><span class="id" type="definition">FV</span></a> <span class="id" type="var">M1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="lambda_calculus.html#Lam"><span class="id" type="constructor">Lam</span></a> <span class="id" type="var">x</span> <span class="id" type="var">M'</span>  =&gt; <a class="idref" href="lambda_calculus.html#FV"><span class="id" type="definition">FV</span></a> <span class="id" type="var">M'</span> <a class="idref" href="lists_decidable.html#DecidableIn.::x_'\'_'{'_x_'}'"><span class="id" type="notation">\</span></a> <a class="idref" href="lists_decidable.html#DecidableIn.::x_'\'_'{'_x_'}'"><span class="id" type="notation">{</span></a><span class="id" type="var">x</span><a class="idref" href="lists_decidable.html#DecidableIn.::x_'\'_'{'_x_'}'"><span class="id" type="notation">}</span></a><br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab8"></a><h3 class="section">Substitution functions</h3>

</div>
<div class="code">

<br/>
</div>

<div class="doc">
The type of simultaneous substitutions =: <span class="inlinecode"><span class="id" type="var">var</span> -&gt; <span class="id" type="var">term</span></span>. 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Definition</span> <a name="substitution"><span class="id" type="definition">substitution</span></a> := <a class="idref" href="lambda_calculus.html#var"><span class="id" type="abbreviation">var</span></a> -&gt; <a class="idref" href="lambda_calculus.html#term"><span class="id" type="inductive">term</span></a>.<br/>

<br/>
</div>

<div class="doc">
The identity substitution 
</div>
<div class="code">

<br/>
<span class="id" type="var">Notation </span><a name="iota"><span class="id" type="abbreviation">iota</span></a> := (<span class="id" type="keyword">fun</span> (<span class="id" type="var">x</span> : <a class="idref" href="fresh_variables.html#Nat.X"><span class="id" type="definition">X</span></a>) =&gt; <a class="idref" href="lambda_calculus.html#Var"><span class="id" type="constructor">Var</span></a> <span class="id" type="var">x</span>).<br/>

<br/>
</div>

<div class="doc">
Collecting free variables occurring during substitution 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Fixpoint</span> <a name="fv_coll"><span class="id" type="definition">fv_coll</span></a> (<span class="id" type="var">L</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Init.Datatypes.html#list"><span class="id" type="inductive">list</span></a> <a class="idref" href="lambda_calculus.html#var"><span class="id" type="abbreviation">var</span></a>) (<span class="id" type="var">rho</span> : <a class="idref" href="lambda_calculus.html#substitution"><span class="id" type="definition">substitution</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Init.Datatypes.html#list"><span class="id" type="inductive">list</span></a> <a class="idref" href="lambda_calculus.html#var"><span class="id" type="abbreviation">var</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">L</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" type="constructor">nil</span></a>     =&gt; <a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" type="constructor">nil</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" type="var">x</span> <a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Init.Datatypes.html#:list_scope:x_'::'_x"><span class="id" type="notation">::</span></a> <span class="id" type="var">L0</span> =&gt; <a class="idref" href="lambda_calculus.html#FV"><span class="id" type="definition">FV</span></a> (<span class="id" type="var">rho</span> <span class="id" type="var">x</span>) <a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Init.Datatypes.html#:list_scope:x_'++'_x"><span class="id" type="notation">++</span></a> <a class="idref" href="lambda_calculus.html#fv_coll"><span class="id" type="definition">fv_coll</span></a> <span class="id" type="var">L0</span> <span class="id" type="var">rho</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
In Stoughton's paper, an operation called <i>new</i> builds sets of
   variables which do not come up during a substitution.

<br/> <br/>
   We use <span class="inlinecode"><span class="id" type="var">old</span></span> as the dual function such that it constructs finite
   complement of <i>new</i> operaton. That is, it collects all the
   variables which come up during a substitution.

<br/> <br/>
   In combination with <span class="inlinecode"><span class="id" type="var">old</span></span>, <span class="inlinecode"><span class="id" type="var">choice</span></span> operation provides a fresh
   variable w.r.t. a substitution. 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Definition</span> <a name="old"><span class="id" type="definition">old</span></a> (<span class="id" type="var">x</span> : <a class="idref" href="lambda_calculus.html#var"><span class="id" type="abbreviation">var</span></a>) (<span class="id" type="var">M</span> : <a class="idref" href="lambda_calculus.html#term"><span class="id" type="inductive">term</span></a>) (<span class="id" type="var">rho</span> : <a class="idref" href="lambda_calculus.html#substitution"><span class="id" type="definition">substitution</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Init.Datatypes.html#list"><span class="id" type="inductive">list</span></a> <a class="idref" href="lambda_calculus.html#var"><span class="id" type="abbreviation">var</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="lambda_calculus.html#fv_coll"><span class="id" type="definition">fv_coll</span></a> (<a class="idref" href="lambda_calculus.html#FV"><span class="id" type="definition">FV</span></a> <span class="id" type="var">M</span> <a class="idref" href="lists_decidable.html#DecidableIn.::x_'\'_'{'_x_'}'"><span class="id" type="notation">\</span></a> <a class="idref" href="lists_decidable.html#DecidableIn.::x_'\'_'{'_x_'}'"><span class="id" type="notation">{</span></a><span class="id" type="var">x</span><a class="idref" href="lists_decidable.html#DecidableIn.::x_'\'_'{'_x_'}'"><span class="id" type="notation">}</span></a>) <span class="id" type="var">rho</span>.<br/>

<br/>
<span class="id" type="keyword">Hint</span> <span class="id" type="keyword">Unfold</span> <a class="idref" href="lambda_calculus.html#old"><span class="id" type="definition">old</span></a>.<br/>

<br/>
</div>

<div class="doc">
Properties about <span class="inlinecode"><span class="id" type="var">fv_coll</span></span> 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Lemma</span> <a name="fv_coll_app"><span class="id" type="lemma">fv_coll_app</span></a> : <span class="id" type="keyword">forall</span> (<span class="id" type="var">L</span> <span class="id" type="var">L'</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Init.Datatypes.html#list"><span class="id" type="inductive">list</span></a> <a class="idref" href="lambda_calculus.html#var"><span class="id" type="abbreviation">var</span></a>) (<span class="id" type="var">rho</span> : <a class="idref" href="lambda_calculus.html#substitution"><span class="id" type="definition">substitution</span></a>),<br/>
&nbsp;&nbsp;<a class="idref" href="lambda_calculus.html#fv_coll"><span class="id" type="definition">fv_coll</span></a> (<span class="id" type="var">L</span> <a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Init.Datatypes.html#:list_scope:x_'++'_x"><span class="id" type="notation">++</span></a> <span class="id" type="var">L'</span>) <span class="id" type="var">rho</span> <a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="lambda_calculus.html#fv_coll"><span class="id" type="definition">fv_coll</span></a> <span class="id" type="var">L</span> <span class="id" type="var">rho</span> <a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Init.Datatypes.html#:list_scope:x_'++'_x"><span class="id" type="notation">++</span></a> <a class="idref" href="lambda_calculus.html#fv_coll"><span class="id" type="definition">fv_coll</span></a> <span class="id" type="var">L'</span> <span class="id" type="var">rho</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">induction</span> <span class="id" type="var">L</span>; <span class="id" type="tactic">simpl</span>; <span class="id" type="tactic">intros</span>; <span class="id" type="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Lists.List.html#app_assoc_reverse"><span class="id" type="lemma">app_assoc_reverse</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">f_equal</span>; <span class="id" type="tactic">auto</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="fv_coll_rm"><span class="id" type="lemma">fv_coll_rm</span></a> : <span class="id" type="keyword">forall</span> (<span class="id" type="var">L</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Init.Datatypes.html#list"><span class="id" type="inductive">list</span></a> <a class="idref" href="lambda_calculus.html#var"><span class="id" type="abbreviation">var</span></a>) (<span class="id" type="var">x</span> <span class="id" type="var">y</span> : <a class="idref" href="lambda_calculus.html#var"><span class="id" type="abbreviation">var</span></a>) (<span class="id" type="var">rho</span> : <a class="idref" href="lambda_calculus.html#substitution"><span class="id" type="definition">substitution</span></a>),<br/>
&nbsp;&nbsp;<span class="id" type="var">y</span> <a class="idref" href="lists_decidable.html#::x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="lambda_calculus.html#fv_coll"><span class="id" type="definition">fv_coll</span></a> (<span class="id" type="var">L</span> <a class="idref" href="lists_decidable.html#DecidableIn.::x_'\'_'{'_x_'}'"><span class="id" type="notation">\</span></a> <a class="idref" href="lists_decidable.html#DecidableIn.::x_'\'_'{'_x_'}'"><span class="id" type="notation">{</span></a><span class="id" type="var">x</span><a class="idref" href="lists_decidable.html#DecidableIn.::x_'\'_'{'_x_'}'"><span class="id" type="notation">}</span></a>) <span class="id" type="var">rho</span> -&gt; <br/>
&nbsp;&nbsp;<a class="idref" href="lambda_calculus.html#fv_coll"><span class="id" type="definition">fv_coll</span></a> <span class="id" type="var">L</span> (<span class="id" type="var">rho</span> <a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">[[</span></a><a class="idref" href="lambda_calculus.html#Var"><span class="id" type="constructor">Var</span></a> <span class="id" type="var">y</span> <a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">=&gt;</span></a> <span class="id" type="var">x</span><a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">]]</span></a>) <a class="idref" href="lists_decidable.html#DecidableIn.::x_'\'_'{'_x_'}'"><span class="id" type="notation">\</span></a> <a class="idref" href="lists_decidable.html#DecidableIn.::x_'\'_'{'_x_'}'"><span class="id" type="notation">{</span></a><span class="id" type="var">y</span><a class="idref" href="lists_decidable.html#DecidableIn.::x_'\'_'{'_x_'}'"><span class="id" type="notation">}</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="lambda_calculus.html#fv_coll"><span class="id" type="definition">fv_coll</span></a> (<span class="id" type="var">L</span> <a class="idref" href="lists_decidable.html#DecidableIn.::x_'\'_'{'_x_'}'"><span class="id" type="notation">\</span></a> <a class="idref" href="lists_decidable.html#DecidableIn.::x_'\'_'{'_x_'}'"><span class="id" type="notation">{</span></a><span class="id" type="var">x</span><a class="idref" href="lists_decidable.html#DecidableIn.::x_'\'_'{'_x_'}'"><span class="id" type="notation">}</span></a>) <span class="id" type="var">rho</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">induction</span> <span class="id" type="var">L</span> <span class="id" type="keyword">as</span> [ | <span class="id" type="var">z</span>]; <span class="id" type="tactic">simpl</span>; <span class="id" type="tactic">intros</span>; <span class="id" type="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" type="var">case_dec</span>; <span class="id" type="tactic">simpl</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="var">Case</span> "x = z".<br/>
&nbsp;&nbsp;<span class="id" type="var">rewrite_up</span>; <span class="id" type="tactic">simpl</span>; <span class="id" type="var">case_dec</span>; <span class="id" type="tactic">intuition</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="var">Case</span> "x &lt;&gt; z".<br/>
&nbsp;&nbsp;<span class="id" type="var">rewrite_up</span>. <span class="id" type="var">rewrite_app</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">f_equal</span>; <span class="id" type="var">destr_app</span>; <span class="id" type="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="lambda_calculus.html#Nat_dec.notin_rm_3"><span class="id" type="lemma">notin_rm_3</span></a>; <span class="id" type="tactic">auto</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="fv_coll_iota"><span class="id" type="lemma">fv_coll_iota</span></a> : <span class="id" type="keyword">forall</span> (<span class="id" type="var">L</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Init.Datatypes.html#list"><span class="id" type="inductive">list</span></a> <a class="idref" href="lambda_calculus.html#var"><span class="id" type="abbreviation">var</span></a>),<br/>
&nbsp;&nbsp;<span class="id" type="var">L</span> <a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="lambda_calculus.html#fv_coll"><span class="id" type="definition">fv_coll</span></a> <span class="id" type="var">L</span> <a class="idref" href="lambda_calculus.html#iota"><span class="id" type="abbreviation">iota</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">induction</span> <span class="id" type="var">L</span>; <span class="id" type="tactic">simpl</span>; [ | <span class="id" type="tactic">f_equal</span>]; <span class="id" type="tactic">auto</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="fv_coll_iota_up"><span class="id" type="lemma">fv_coll_iota_up</span></a> : <span class="id" type="keyword">forall</span> (<span class="id" type="var">L</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Init.Datatypes.html#list"><span class="id" type="inductive">list</span></a> <a class="idref" href="lambda_calculus.html#var"><span class="id" type="abbreviation">var</span></a>) (<span class="id" type="var">x</span> <span class="id" type="var">y</span> <span class="id" type="var">z</span> : <a class="idref" href="lambda_calculus.html#var"><span class="id" type="abbreviation">var</span></a>),<br/>
&nbsp;&nbsp;<span class="id" type="var">y</span> <a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Init.Logic.html#:type_scope:x_'<>'_x"><span class="id" type="notation">&lt;&gt;</span></a> <span class="id" type="var">x</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id" type="var">y</span> <a class="idref" href="lists_decidable.html#::x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="lambda_calculus.html#fv_coll"><span class="id" type="definition">fv_coll</span></a> <span class="id" type="var">L</span> (<a class="idref" href="lambda_calculus.html#iota"><span class="id" type="abbreviation">iota</span></a> <a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">[[</span></a><a class="idref" href="lambda_calculus.html#Var"><span class="id" type="constructor">Var</span></a> <span class="id" type="var">z</span> <a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">=&gt;</span></a> <span class="id" type="var">x</span><a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">]]</span></a>) -&gt;<br/>
&nbsp;&nbsp;<span class="id" type="var">y</span> <a class="idref" href="lists_decidable.html#::x_'#'_x"><span class="id" type="notation">#</span></a> <span class="id" type="var">L</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">induction</span> <span class="id" type="var">L</span> <span class="id" type="keyword">as</span> [ | <span class="id" type="var">v</span> <span class="id" type="var">L'</span>]; <span class="id" type="tactic">simpl</span>; <span class="id" type="tactic">intros</span>; <span class="id" type="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" type="var">destr_app</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> (<span class="id" type="var">x</span> <a class="idref" href="lists_decidable.html#DecidableIn.::x_'=='_x"><span class="id" type="notation">==</span></a> <span class="id" type="var">v</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="var">Case</span> "x = v".<br/>
&nbsp;&nbsp;<span class="id" type="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" type="var">rewrite_up</span>; <span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">red</span>; <span class="id" type="tactic">intro</span> <span class="id" type="var">Hor</span>; <span class="id" type="tactic">elim</span> <span class="id" type="var">Hor</span>; <span class="id" type="tactic">clear</span> <span class="id" type="var">Hor</span>; <span class="id" type="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" type="var">change</span> (<span class="id" type="var">y</span> <a class="idref" href="lists_decidable.html#::x_'#'_x"><span class="id" type="notation">#</span></a> <span class="id" type="var">L'</span>); <span class="id" type="tactic">eauto</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="var">Case</span> "x &lt;&gt; v".<br/>
&nbsp;&nbsp;<span class="id" type="tactic">red</span>; <span class="id" type="tactic">intro</span> <span class="id" type="var">Hor</span>; <span class="id" type="tactic">elim</span> <span class="id" type="var">Hor</span>; <span class="id" type="tactic">clear</span> <span class="id" type="var">Hor</span>; <span class="id" type="tactic">auto</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="var">SCase</span> "/\-left".<br/>
&nbsp;&nbsp;<span class="id" type="var">rewrite_up</span>; <span class="id" type="tactic">simpl</span>; <span class="id" type="tactic">firstorder</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="var">SCase</span> "/\-right".<br/>
&nbsp;&nbsp;<span class="id" type="var">change</span> (<span class="id" type="var">y</span> <a class="idref" href="lists_decidable.html#::x_'#'_x"><span class="id" type="notation">#</span></a> <span class="id" type="var">L'</span>); <span class="id" type="tactic">eauto</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="fresh_iota"><span class="id" type="lemma">fresh_iota</span></a> : <span class="id" type="keyword">forall</span> (<span class="id" type="var">M</span> : <a class="idref" href="lambda_calculus.html#term"><span class="id" type="inductive">term</span></a>) (<span class="id" type="var">x</span> : <a class="idref" href="lambda_calculus.html#var"><span class="id" type="abbreviation">var</span></a>),<br/>
&nbsp;&nbsp;<a class="idref" href="fresh_variables.html#Nat.choice"><span class="id" type="definition">choice</span></a> (<a class="idref" href="lambda_calculus.html#old"><span class="id" type="definition">old</span></a> <span class="id" type="var">x</span> <span class="id" type="var">M</span> <a class="idref" href="lambda_calculus.html#iota"><span class="id" type="abbreviation">iota</span></a>) <a class="idref" href="lists_decidable.html#::x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="lambda_calculus.html#FV"><span class="id" type="definition">FV</span></a> <span class="id" type="var">M</span> <a class="idref" href="lists_decidable.html#DecidableIn.::x_'\'_'{'_x_'}'"><span class="id" type="notation">\</span></a> <a class="idref" href="lists_decidable.html#DecidableIn.::x_'\'_'{'_x_'}'"><span class="id" type="notation">{</span></a><span class="id" type="var">x</span><a class="idref" href="lists_decidable.html#DecidableIn.::x_'\'_'{'_x_'}'"><span class="id" type="notation">}</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <span class="id" type="var">old</span>; <span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> &lt;- <a class="idref" href="lambda_calculus.html#fv_coll_iota"><span class="id" type="lemma">fv_coll_iota</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="fresh_variables.html#Nat.choice_fresh"><span class="id" type="lemma">choice_fresh</span></a>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab9"></a><h3 class="section">Simultaneous substitution</h3>

</div>
<div class="code">

<br/>
<span class="id" type="keyword">Fixpoint</span> <a name="subst"><span class="id" type="definition">subst</span></a> (<span class="id" type="var">M</span> : <a class="idref" href="lambda_calculus.html#term"><span class="id" type="inductive">term</span></a>) (<span class="id" type="var">rho</span> : <a class="idref" href="lambda_calculus.html#substitution"><span class="id" type="definition">substitution</span></a>) {<span class="id" type="keyword">struct</span> <span class="id" type="var">M</span>} : <a class="idref" href="lambda_calculus.html#term"><span class="id" type="inductive">term</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">M</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="lambda_calculus.html#Var"><span class="id" type="constructor">Var</span></a> <span class="id" type="var">x</span>     =&gt; <span class="id" type="var">rho</span> <span class="id" type="var">x</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="lambda_calculus.html#App"><span class="id" type="constructor">App</span></a> <span class="id" type="var">M0</span> <span class="id" type="var">M1</span> =&gt; <a class="idref" href="lambda_calculus.html#App"><span class="id" type="constructor">App</span></a> (<a class="idref" href="lambda_calculus.html#subst"><span class="id" type="definition">subst</span></a> <span class="id" type="var">M0</span> <span class="id" type="var">rho</span>) (<a class="idref" href="lambda_calculus.html#subst"><span class="id" type="definition">subst</span></a> <span class="id" type="var">M1</span> <span class="id" type="var">rho</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="lambda_calculus.html#Lam"><span class="id" type="constructor">Lam</span></a> <span class="id" type="var">x</span> <span class="id" type="var">M'</span>  =&gt; <span class="id" type="keyword">let</span> <span class="id" type="var">y</span> := <a class="idref" href="fresh_variables.html#Nat.choice"><span class="id" type="definition">choice</span></a> (<a class="idref" href="lambda_calculus.html#old"><span class="id" type="definition">old</span></a> <span class="id" type="var">x</span> <span class="id" type="var">M'</span> <span class="id" type="var">rho</span>) <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lambda_calculus.html#Lam"><span class="id" type="constructor">Lam</span></a> <span class="id" type="var">y</span> (<a class="idref" href="lambda_calculus.html#subst"><span class="id" type="definition">subst</span></a> <span class="id" type="var">M'</span> (<span class="id" type="var">rho</span> <a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">[[</span></a><a class="idref" href="lambda_calculus.html#Var"><span class="id" type="constructor">Var</span></a> <span class="id" type="var">y</span> <a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">=&gt;</span></a> <span class="id" type="var">x</span><a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">]]</span></a>))<br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
<span class="id" type="var">Notation </span><a name="::x_'{{'_x_'}}'"><span class="id" type="notation">"</span></a> M {{ rho }} " := (<a class="idref" href="lambda_calculus.html#subst"><span class="id" type="definition">subst</span></a> <span class="id" type="var">M</span> <span class="id" type="var">rho</span>) (<span class="id" type="tactic">at</span> <span class="id" type="var">level</span> 55).<br/>

<br/>
</div>

<div class="doc">
The following lemma <span class="inlinecode"><span class="id" type="var">fv_coll_subst</span></span> is the most crucial lemma
   in the whole development.

<br/> <br/>
   It reduces many of the lemmas about substitution and free
   variables to properties about collecting free variables. 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Lemma</span> <a name="fv_coll_subst"><span class="id" type="lemma">fv_coll_subst</span></a> : <span class="id" type="keyword">forall</span> (<span class="id" type="var">M</span> : <a class="idref" href="lambda_calculus.html#term"><span class="id" type="inductive">term</span></a>) (<span class="id" type="var">rho</span> : <a class="idref" href="lambda_calculus.html#substitution"><span class="id" type="definition">substitution</span></a>),<br/>
&nbsp;&nbsp;<a class="idref" href="lambda_calculus.html#FV"><span class="id" type="definition">FV</span></a> (<span class="id" type="var">M</span> <a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><span class="id" type="var">rho</span><a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="lambda_calculus.html#fv_coll"><span class="id" type="definition">fv_coll</span></a> (<a class="idref" href="lambda_calculus.html#FV"><span class="id" type="definition">FV</span></a> <span class="id" type="var">M</span>) <span class="id" type="var">rho</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">induction</span> <span class="id" type="var">M</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">x</span> | | <span class="id" type="var">x</span> <span class="id" type="var">M'</span>]; <span class="id" type="tactic">simpl</span>; <span class="id" type="tactic">intros</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="var">Case</span> "Var".<br/>
&nbsp;&nbsp;<span class="id" type="tactic">auto</span> <span class="id" type="keyword">using</span> <a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Lists.List.html#app_nil_end"><span class="id" type="lemma">app_nil_end</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="var">Case</span> "App".<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="lambda_calculus.html#fv_coll_app"><span class="id" type="lemma">fv_coll_app</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">f_equal</span>;<span class="id" type="tactic">auto</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="var">Case</span> "Lam".<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM'</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">auto</span> <span class="id" type="keyword">using</span> <a class="idref" href="lambda_calculus.html#fv_coll_rm"><span class="id" type="lemma">fv_coll_rm</span></a>, <a class="idref" href="fresh_variables.html#Nat.choice_fresh"><span class="id" type="lemma">choice_fresh</span></a>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
N.B. Note that we use Coq's internal equality instead of any
   kind of set-theoretic equalities or setoid equalities. 
</div>
<div class="code">

<br/>
</div>

<div class="doc">
Composition of simultaneous substitutions 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Definition</span> <a name="comp"><span class="id" type="definition">comp</span></a> (<span class="id" type="var">eta</span> <span class="id" type="var">rho</span> : <a class="idref" href="lambda_calculus.html#substitution"><span class="id" type="definition">substitution</span></a>) : <a class="idref" href="lambda_calculus.html#substitution"><span class="id" type="definition">substitution</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">fun</span> <span class="id" type="var">x</span> =&gt; <a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">(</span></a><span class="id" type="var">rho</span> <span class="id" type="var">x</span><a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">)</span></a> <a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><span class="id" type="var">eta</span><a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab10"></a><h3 class="section">alpha-congruence</h3>

</div>
<div class="code">

<br/>
</div>

<div class="doc">
Notation for alpha-congruence 
</div>
<div class="code">

<br/>
<span class="id" type="var">Reserved Notation </span>"M 'Eq' N" (<span class="id" type="tactic">at</span> <span class="id" type="var">level</span> 75).<br/>

<br/>
</div>

<div class="doc">
The following definition corresponds to <span class="inlinecode"><span class="id" type="keyword">Corollary</span> 3.10</span> in
   Stoughton's paper:
<ul>
<li> She gave first informal definition of alpha-congruence
     as the least equivalence relation on <span class="inlinecode"><span class="id" type="var">term</span></span> such that

<br/> <br/>
<ul>
<li> (mu) <span class="inlinecode"><span class="id" type="var">M</span> <span class="id" type="var">N</span> <span class="id" type="var">Eq</span> <span class="id" type="var">M'</span> <span class="id" type="var">N'</span></span> if <span class="inlinecode"><span class="id" type="var">M</span> <span class="id" type="var">Eq</span> <span class="id" type="var">N</span></span> and <span class="inlinecode"><span class="id" type="var">M'</span> <span class="id" type="var">Eq</span> <span class="id" type="var">N'</span></span>; and

<br/> <br/>

</li>
<li> (alpha) <span class="inlinecode"><span class="id" type="var">Lam</span> <span class="id" type="var">x</span> <span class="id" type="var">M</span> <span class="id" type="var">Eq</span> <span class="id" type="var">Lam</span> <span class="id" type="var">y</span> <span class="id" type="var">N</span></span> if either 
<ul>
<li> <span class="inlinecode"><span class="id" type="var">x</span> = <span class="id" type="var">y</span></span> and <span class="inlinecode"><span class="id" type="var">M</span> <span class="id" type="var">Eq</span> <span class="id" type="var">N</span></span>, or

</li>
<li> <span class="inlinecode"><span class="id" type="var">y</span> # <span class="id" type="var">FV</span> <span class="id" type="var">M</span></span> and <span class="inlinecode"><span class="id" type="var">M</span> {{<span class="id" type="var">iota</span> [[<span class="id" type="var">Var</span> =&gt; <span class="id" type="var">x</span>]]}} <span class="id" type="var">Eq</span> <span class="id" type="var">N</span></span>.

</li>
</ul>

</li>
</ul>

</li>
<li> The condition (alpha) above is given a name:
    <br/>
<span class="inlinecode">&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">M</span>(<span class="id" type="var">x</span>) <span class="id" type="var">Eq</span> <span class="id" type="var">N</span>(<span class="id" type="var">y</span>)
<br/> <br/>
</span>
</li>
<li> Then <span class="inlinecode"><span class="id" type="keyword">Corollary</span> 3.10</span> shows that the alpha-congruence
     of two terms can be characterized by a structural
     induction.

<br/> <br/>
     So we took <span class="inlinecode"><span class="id" type="keyword">Corollary</span> 3.10</span> as our definition of alpha-
     congruence and then shows below that it is a equivalence
     relation. 
</li>
</ul>

</div>
<div class="code">

<br/>
<span class="id" type="keyword">Inductive</span> <a name="a_cong"><span class="id" type="inductive">a_cong</span></a> : <a class="idref" href="lambda_calculus.html#term"><span class="id" type="inductive">term</span></a> -&gt; <a class="idref" href="lambda_calculus.html#term"><span class="id" type="inductive">term</span></a> -&gt; <span class="id" type="keyword">Prop</span> :=<br/>
| <a name="al_var"><span class="id" type="constructor">al_var</span></a> : <span class="id" type="keyword">forall</span> (<span class="id" type="var">x</span> : <a class="idref" href="lambda_calculus.html#var"><span class="id" type="abbreviation">var</span></a>), <a class="idref" href="lambda_calculus.html#::x_'Eq'_x"><span class="id" type="notation">(</span></a><a class="idref" href="lambda_calculus.html#Var"><span class="id" type="constructor">Var</span></a> <span class="id" type="var">x</span><a class="idref" href="lambda_calculus.html#::x_'Eq'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="lambda_calculus.html#::x_'Eq'_x"><span class="id" type="notation">Eq</span></a> <a class="idref" href="lambda_calculus.html#::x_'Eq'_x"><span class="id" type="notation">(</span></a><a class="idref" href="lambda_calculus.html#Var"><span class="id" type="constructor">Var</span></a> <span class="id" type="var">x</span><a class="idref" href="lambda_calculus.html#::x_'Eq'_x"><span class="id" type="notation">)</span></a><br/>
| <a name="al_app"><span class="id" type="constructor">al_app</span></a> : <span class="id" type="keyword">forall</span> (<span class="id" type="var">M</span> <span class="id" type="var">N</span> <span class="id" type="var">M0</span> <span class="id" type="var">N0</span> : <a class="idref" href="lambda_calculus.html#term"><span class="id" type="inductive">term</span></a>),<br/>
&nbsp;&nbsp;<span class="id" type="var">M</span> <a class="idref" href="lambda_calculus.html#::x_'Eq'_x"><span class="id" type="notation">Eq</span></a> <span class="id" type="var">M0</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id" type="var">N</span> <a class="idref" href="lambda_calculus.html#::x_'Eq'_x"><span class="id" type="notation">Eq</span></a> <span class="id" type="var">N0</span> -&gt;<br/>
&nbsp;&nbsp;<a class="idref" href="lambda_calculus.html#::x_'Eq'_x"><span class="id" type="notation">(</span></a><a class="idref" href="lambda_calculus.html#App"><span class="id" type="constructor">App</span></a> <span class="id" type="var">M</span> <span class="id" type="var">N</span><a class="idref" href="lambda_calculus.html#::x_'Eq'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="lambda_calculus.html#::x_'Eq'_x"><span class="id" type="notation">Eq</span></a> <a class="idref" href="lambda_calculus.html#::x_'Eq'_x"><span class="id" type="notation">(</span></a><a class="idref" href="lambda_calculus.html#App"><span class="id" type="constructor">App</span></a> <span class="id" type="var">M0</span> <span class="id" type="var">N0</span><a class="idref" href="lambda_calculus.html#::x_'Eq'_x"><span class="id" type="notation">)</span></a><br/>
| <a name="al_lam_eq"><span class="id" type="constructor">al_lam_eq</span></a> : <span class="id" type="keyword">forall</span> (<span class="id" type="var">x</span> <span class="id" type="var">y</span> : <a class="idref" href="lambda_calculus.html#var"><span class="id" type="abbreviation">var</span></a>) (<span class="id" type="var">M</span> <span class="id" type="var">N</span> : <a class="idref" href="lambda_calculus.html#term"><span class="id" type="inductive">term</span></a>),<br/>
&nbsp;&nbsp;<span class="id" type="var">x</span> <a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <span class="id" type="var">y</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id" type="var">M</span> <a class="idref" href="lambda_calculus.html#::x_'Eq'_x"><span class="id" type="notation">Eq</span></a> <span class="id" type="var">N</span> -&gt;<br/>
&nbsp;&nbsp;<a class="idref" href="lambda_calculus.html#::x_'Eq'_x"><span class="id" type="notation">(</span></a><a class="idref" href="lambda_calculus.html#Lam"><span class="id" type="constructor">Lam</span></a> <span class="id" type="var">x</span> <span class="id" type="var">M</span><a class="idref" href="lambda_calculus.html#::x_'Eq'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="lambda_calculus.html#::x_'Eq'_x"><span class="id" type="notation">Eq</span></a> <a class="idref" href="lambda_calculus.html#::x_'Eq'_x"><span class="id" type="notation">(</span></a><a class="idref" href="lambda_calculus.html#Lam"><span class="id" type="constructor">Lam</span></a> <span class="id" type="var">y</span> <span class="id" type="var">N</span><a class="idref" href="lambda_calculus.html#::x_'Eq'_x"><span class="id" type="notation">)</span></a><br/>
| <a name="al_lam_notin"><span class="id" type="constructor">al_lam_notin</span></a> : <span class="id" type="keyword">forall</span> (<span class="id" type="var">x</span> <span class="id" type="var">y</span> : <a class="idref" href="lambda_calculus.html#var"><span class="id" type="abbreviation">var</span></a>) (<span class="id" type="var">M</span> <span class="id" type="var">N</span> : <a class="idref" href="lambda_calculus.html#term"><span class="id" type="inductive">term</span></a>),<br/>
&nbsp;&nbsp;<span class="id" type="var">y</span> <a class="idref" href="lists_decidable.html#::x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="lambda_calculus.html#FV"><span class="id" type="definition">FV</span></a> <span class="id" type="var">M</span> -&gt;<br/>
&nbsp;&nbsp;<a class="idref" href="lambda_calculus.html#::x_'Eq'_x"><span class="id" type="notation">(</span></a><span class="id" type="var">M</span> <a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><a class="idref" href="lambda_calculus.html#iota"><span class="id" type="abbreviation">iota</span></a> <a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">[[</span></a><a class="idref" href="lambda_calculus.html#Var"><span class="id" type="constructor">Var</span></a> <span class="id" type="var">y</span> <a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">=&gt;</span></a> <span class="id" type="var">x</span><a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">]]</span></a><a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a><a class="idref" href="lambda_calculus.html#::x_'Eq'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="lambda_calculus.html#::x_'Eq'_x"><span class="id" type="notation">Eq</span></a> <span class="id" type="var">N</span> -&gt;<br/>
&nbsp;&nbsp;<a class="idref" href="lambda_calculus.html#::x_'Eq'_x"><span class="id" type="notation">(</span></a><a class="idref" href="lambda_calculus.html#Lam"><span class="id" type="constructor">Lam</span></a> <span class="id" type="var">x</span> <span class="id" type="var">M</span><a class="idref" href="lambda_calculus.html#::x_'Eq'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="lambda_calculus.html#::x_'Eq'_x"><span class="id" type="notation">Eq</span></a> <a class="idref" href="lambda_calculus.html#::x_'Eq'_x"><span class="id" type="notation">(</span></a><a class="idref" href="lambda_calculus.html#Lam"><span class="id" type="constructor">Lam</span></a> <span class="id" type="var">y</span> <span class="id" type="var">N</span><a class="idref" href="lambda_calculus.html#::x_'Eq'_x"><span class="id" type="notation">)</span></a><br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="id" type="var">where </span><a name="::x_'Eq'_x"><span class="id" type="notation">"</span></a> M 'Eq' N " := (<a class="idref" href="lambda_calculus.html#a_cong"><span class="id" type="inductive">a_cong</span></a> <span class="id" type="var">M</span> <span class="id" type="var">N</span>).<br/>

<br/>
<span class="id" type="keyword">Hint</span> <span class="id" type="var">Constructors</span> <span class="id" type="var">a_cong</span>.<br/>

<br/>
</div>

<div class="doc">
Formal definition of <span class="inlinecode"><span class="id" type="var">M</span>(<span class="id" type="var">x</span>) <span class="id" type="var">Eq</span> <span class="id" type="var">N</span>(<span class="id" type="var">y</span>)</span> 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Definition</span> <a name="alpha_cond"><span class="id" type="definition">alpha_cond</span></a> <span class="id" type="var">M</span> <span class="id" type="var">x</span> <span class="id" type="var">N</span> <span class="id" type="var">y</span> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Init.Logic.html#:type_scope:x_'\/'_x"><span class="id" type="notation">(</span></a><span class="id" type="var">x</span> <a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <span class="id" type="var">y</span> <a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Init.Logic.html#:type_scope:x_'/\'_x"><span class="id" type="notation">/\</span></a> <span class="id" type="var">M</span> <a class="idref" href="lambda_calculus.html#::x_'Eq'_x"><span class="id" type="notation">Eq</span></a> <span class="id" type="var">N</span><a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Init.Logic.html#:type_scope:x_'\/'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Init.Logic.html#:type_scope:x_'\/'_x"><span class="id" type="notation">\/</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Init.Logic.html#:type_scope:x_'\/'_x"><span class="id" type="notation">(</span></a><span class="id" type="var">y</span> <a class="idref" href="lists_decidable.html#::x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="lambda_calculus.html#FV"><span class="id" type="definition">FV</span></a> <span class="id" type="var">M</span> <a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Init.Logic.html#:type_scope:x_'/\'_x"><span class="id" type="notation">/\</span></a> <span class="id" type="var">M</span> <a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><a class="idref" href="lambda_calculus.html#iota"><span class="id" type="abbreviation">iota</span></a> <a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">[[</span></a><a class="idref" href="lambda_calculus.html#Var"><span class="id" type="constructor">Var</span></a> <span class="id" type="var">y</span> <a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">=&gt;</span></a> <span class="id" type="var">x</span><a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">]]</span></a><a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <a class="idref" href="lambda_calculus.html#::x_'Eq'_x"><span class="id" type="notation">Eq</span></a> <span class="id" type="var">N</span><a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Init.Logic.html#:type_scope:x_'\/'_x"><span class="id" type="notation">)</span></a>.<br/>

<br/>
</div>

<div class="doc">
The simple state that <span class="inlinecode"><span class="id" type="var">M</span>(<span class="id" type="var">x</span>) <span class="id" type="var">Eq</span> <span class="id" type="var">N</span>(<span class="id" type="var">y</span>)</span> implies <span class="inlinecode"><span class="id" type="var">N</span>(<span class="id" type="var">y</span>) <span class="id" type="var">Eq</span> <span class="id" type="var">M</span>(<span class="id" type="var">x</span>)</span>
   cannot be proved until some properties about substitution and
   alpha-congruence are proved.

<br/> <br/>
   In fact, not until Theorem 3.5 in Stoughton's paper
   (<span class="inlinecode"><span class="id" type="var">T3_5</span></span> in our formalization).

<br/> <br/>
   It is closely related to the proof of the symmetry
   of the alpha-congruence. So, the fact that alpha-congruence is
   indeed an equivalence relation could be shown after <span class="inlinecode"><span class="id" type="var">T3_5</span></span>. 
</div>
<div class="code">

<br/>
</div>

<div class="doc">
alpha-congruence of substitutions 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Definition</span> <a name="subst_cong"><span class="id" type="definition">subst_cong</span></a> (<span class="id" type="var">rho</span> <span class="id" type="var">eta</span> : <a class="idref" href="lambda_calculus.html#substitution"><span class="id" type="definition">substitution</span></a>) (<span class="id" type="var">L</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Init.Datatypes.html#list"><span class="id" type="inductive">list</span></a> <a class="idref" href="lambda_calculus.html#var"><span class="id" type="abbreviation">var</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> <span class="id" type="var">x</span>, <span class="id" type="var">x</span> <a class="idref" href="lists_decidable.html#::x_'@'_x"><span class="id" type="notation">@</span></a> <span class="id" type="var">L</span> -&gt; <a class="idref" href="lambda_calculus.html#::x_'Eq'_x"><span class="id" type="notation">(</span></a><span class="id" type="var">rho</span> <span class="id" type="var">x</span><a class="idref" href="lambda_calculus.html#::x_'Eq'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="lambda_calculus.html#::x_'Eq'_x"><span class="id" type="notation">Eq</span></a> <a class="idref" href="lambda_calculus.html#::x_'Eq'_x"><span class="id" type="notation">(</span></a><span class="id" type="var">eta</span> <span class="id" type="var">x</span><a class="idref" href="lambda_calculus.html#::x_'Eq'_x"><span class="id" type="notation">)</span></a>.<br/>

<br/>
<span class="id" type="keyword">Definition</span> <a name="subst_cong'"><span class="id" type="definition">subst_cong'</span></a> (<span class="id" type="var">rho</span> <span class="id" type="var">eta</span> : <a class="idref" href="lambda_calculus.html#substitution"><span class="id" type="definition">substitution</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> <span class="id" type="var">x</span>, <span class="id" type="var">rho</span> <span class="id" type="var">x</span> <a class="idref" href="lambda_calculus.html#::x_'Eq'_x"><span class="id" type="notation">Eq</span></a> <span class="id" type="var">eta</span> <span class="id" type="var">x</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab11"></a><h2 class="section">3. Substitutions and alpha-congruence</h2>

</div>
<div class="code">

<br/>
</div>

<div class="doc">
The reflexivity, symmetry, and transitivity of alpha-congruence
   are necessary in showing other properties about substitution and
   alpha-congruence. They will be shown when it is possible. 
</div>
<div class="code">

<br/>
</div>

<div class="doc">
Reflexivity of alpha-congruence 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Lemma</span> <a name="a_cong_refl"><span class="id" type="lemma">a_cong_refl</span></a> (<span class="id" type="var">M</span> : <a class="idref" href="lambda_calculus.html#term"><span class="id" type="inductive">term</span></a>) : <span class="id" type="var">M</span> <a class="idref" href="lambda_calculus.html#::x_'Eq'_x"><span class="id" type="notation">Eq</span></a> <span class="id" type="var">M</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">induction</span> <span class="id" type="var">M</span>; <span class="id" type="tactic">auto</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="L3_1_i"><span class="id" type="lemma">L3_1_i</span></a> : <span class="id" type="keyword">forall</span> (<span class="id" type="var">M</span> : <a class="idref" href="lambda_calculus.html#term"><span class="id" type="inductive">term</span></a>) (<span class="id" type="var">x</span> <span class="id" type="var">y</span> : <a class="idref" href="lambda_calculus.html#var"><span class="id" type="abbreviation">var</span></a>),<br/>
&nbsp;&nbsp;<span class="id" type="var">y</span> <a class="idref" href="lists_decidable.html#::x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="lambda_calculus.html#FV"><span class="id" type="definition">FV</span></a> <span class="id" type="var">M</span> -&gt; <a class="idref" href="lambda_calculus.html#Lam"><span class="id" type="constructor">Lam</span></a> <span class="id" type="var">x</span> <span class="id" type="var">M</span> <a class="idref" href="lambda_calculus.html#::x_'Eq'_x"><span class="id" type="notation">Eq</span></a> <a class="idref" href="lambda_calculus.html#Lam"><span class="id" type="constructor">Lam</span></a> <span class="id" type="var">y</span> (<span class="id" type="var">M</span> <a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><a class="idref" href="lambda_calculus.html#iota"><span class="id" type="abbreviation">iota</span></a> <a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">[[</span></a><a class="idref" href="lambda_calculus.html#Var"><span class="id" type="constructor">Var</span></a> <span class="id" type="var">y</span> <a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">=&gt;</span></a> <span class="id" type="var">x</span><a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">]]</span></a><a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="lambda_calculus.html#al_lam_notin"><span class="id" type="constructor">al_lam_notin</span></a>; <span class="id" type="tactic">auto</span> <span class="id" type="keyword">using</span> <a class="idref" href="lambda_calculus.html#a_cong_refl"><span class="id" type="lemma">a_cong_refl</span></a>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="L3_1_ii'"><span class="id" type="lemma">L3_1_ii'</span></a> : <span class="id" type="keyword">forall</span> (<span class="id" type="var">L</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Init.Datatypes.html#list"><span class="id" type="inductive">list</span></a> <a class="idref" href="lambda_calculus.html#var"><span class="id" type="abbreviation">var</span></a>)(<span class="id" type="var">x</span> : <a class="idref" href="lambda_calculus.html#var"><span class="id" type="abbreviation">var</span></a>)(<span class="id" type="var">rho</span> : <a class="idref" href="lambda_calculus.html#substitution"><span class="id" type="definition">substitution</span></a>),<br/>
&nbsp;&nbsp;<span class="id" type="var">x</span> <a class="idref" href="lists_decidable.html#::x_'@'_x"><span class="id" type="notation">@</span></a> <a class="idref" href="lambda_calculus.html#fv_coll"><span class="id" type="definition">fv_coll</span></a> <span class="id" type="var">L</span> <span class="id" type="var">rho</span> <a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Init.Logic.html#:type_scope:x_'<->'_x"><span class="id" type="notation">&lt;-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Init.Logic.html#:type_scope:'exists'_x_':'_x_','_x"><span class="id" type="notation">exists</span></a> <span class="id" type="var">y</span> <a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Init.Logic.html#:type_scope:'exists'_x_':'_x_','_x"><span class="id" type="notation">:</span></a> <a class="idref" href="lambda_calculus.html#var"><span class="id" type="abbreviation">var</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Init.Logic.html#:type_scope:'exists'_x_':'_x_','_x"><span class="id" type="notation">,</span></a> <span class="id" type="var">y</span> <a class="idref" href="lists_decidable.html#::x_'@'_x"><span class="id" type="notation">@</span></a> <span class="id" type="var">L</span> <a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Init.Logic.html#:type_scope:x_'/\'_x"><span class="id" type="notation">/\</span></a> <span class="id" type="var">x</span> <a class="idref" href="lists_decidable.html#::x_'@'_x"><span class="id" type="notation">@</span></a> <a class="idref" href="lambda_calculus.html#FV"><span class="id" type="definition">FV</span></a> (<span class="id" type="var">rho</span> <span class="id" type="var">y</span>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">split</span>; <span class="id" type="tactic">induction</span> <span class="id" type="var">L</span>; <span class="id" type="tactic">simpl</span>; <span class="id" type="tactic">intros</span>; <span class="id" type="tactic">firstorder</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="var">Case</span> "-&gt;".<br/>
&nbsp;&nbsp;<span class="id" type="var">destr_app</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" type="var">exists</span> <span class="id" type="var">a</span>; <span class="id" type="tactic">firstorder</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" type="tactic">destruct</span> (<span class="id" type="var">IHL</span>) <span class="id" type="keyword">as</span> [<span class="id" type="var">z</span>]; <span class="id" type="tactic">auto</span>; <span class="id" type="var">exists</span> <span class="id" type="var">z</span>; <span class="id" type="tactic">firstorder</span>].<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="var">Case</span> "&lt;-".<br/>
&nbsp;&nbsp;<span class="id" type="tactic">subst</span>; <span class="id" type="tactic">auto</span> <span class="id" type="keyword">with</span> <span class="id" type="var">datatypes</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="L3_1_ii"><span class="id" type="lemma">L3_1_ii</span></a> : <span class="id" type="keyword">forall</span> (<span class="id" type="var">M</span> : <a class="idref" href="lambda_calculus.html#term"><span class="id" type="inductive">term</span></a>)(<span class="id" type="var">x</span> : <a class="idref" href="lambda_calculus.html#var"><span class="id" type="abbreviation">var</span></a>)(<span class="id" type="var">rho</span> : <a class="idref" href="lambda_calculus.html#substitution"><span class="id" type="definition">substitution</span></a>),<br/>
&nbsp;&nbsp;<span class="id" type="var">x</span> <a class="idref" href="lists_decidable.html#::x_'@'_x"><span class="id" type="notation">@</span></a> <a class="idref" href="lambda_calculus.html#FV"><span class="id" type="definition">FV</span></a> (<span class="id" type="var">M</span> <a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><span class="id" type="var">rho</span><a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Init.Logic.html#:type_scope:x_'<->'_x"><span class="id" type="notation">&lt;-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Init.Logic.html#:type_scope:'exists'_x_':'_x_','_x"><span class="id" type="notation">exists</span></a> <span class="id" type="var">y</span> <a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Init.Logic.html#:type_scope:'exists'_x_':'_x_','_x"><span class="id" type="notation">:</span></a><a class="idref" href="lambda_calculus.html#var"><span class="id" type="abbreviation">var</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Init.Logic.html#:type_scope:'exists'_x_':'_x_','_x"><span class="id" type="notation">,</span></a>  <span class="id" type="var">y</span> <a class="idref" href="lists_decidable.html#::x_'@'_x"><span class="id" type="notation">@</span></a> <a class="idref" href="lambda_calculus.html#FV"><span class="id" type="definition">FV</span></a> <span class="id" type="var">M</span> <a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Init.Logic.html#:type_scope:x_'/\'_x"><span class="id" type="notation">/\</span></a> <span class="id" type="var">x</span> <a class="idref" href="lists_decidable.html#::x_'@'_x"><span class="id" type="notation">@</span></a> <a class="idref" href="lambda_calculus.html#FV"><span class="id" type="definition">FV</span></a> (<span class="id" type="var">rho</span> <span class="id" type="var">y</span>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">split</span>; <span class="id" type="tactic">intros</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="var">Case</span> "-&gt;".<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="lambda_calculus.html#fv_coll_subst"><span class="id" type="lemma">fv_coll_subst</span></a> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="lambda_calculus.html#L3_1_ii'"><span class="id" type="lemma">L3_1_ii'</span></a>; <span class="id" type="tactic">auto</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="var">Case</span> "&lt;-".<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="lambda_calculus.html#fv_coll_subst"><span class="id" type="lemma">fv_coll_subst</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="lambda_calculus.html#L3_1_ii'"><span class="id" type="lemma">L3_1_ii'</span></a>; <span class="id" type="tactic">auto</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="L3_1_iii"><span class="id" type="lemma">L3_1_iii</span></a> : <span class="id" type="keyword">forall</span> (<span class="id" type="var">M</span> <span class="id" type="var">N</span> : <a class="idref" href="lambda_calculus.html#term"><span class="id" type="inductive">term</span></a>),<br/>
&nbsp;&nbsp;<span class="id" type="var">M</span> <a class="idref" href="lambda_calculus.html#::x_'Eq'_x"><span class="id" type="notation">Eq</span></a> <span class="id" type="var">N</span> -&gt; <a class="idref" href="lambda_calculus.html#FV"><span class="id" type="definition">FV</span></a> <span class="id" type="var">M</span> <a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="lambda_calculus.html#FV"><span class="id" type="definition">FV</span></a> <span class="id" type="var">N</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">induction</span> 1; <span class="id" type="tactic">simpl</span>; <span class="id" type="tactic">intros</span>; <span class="id" type="tactic">intuition</span> <span class="id" type="tactic">try</span> <span class="id" type="tactic">congruence</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="var">Case</span> "al_lam_notin".<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">goal</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| [ <span class="id" type="var">H</span> : <a class="idref" href="lambda_calculus.html#FV"><span class="id" type="definition">FV</span></a> <span class="id" type="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="lambda_calculus.html#FV"><span class="id" type="definition">FV</span></a> <span class="id" type="var">_</span> |- <span class="id" type="var">_</span> ] =&gt; <span class="id" type="tactic">rewrite</span> &lt;- <span class="id" type="var">H</span>; <span class="id" type="tactic">auto</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="lambda_calculus.html#fv_coll_subst"><span class="id" type="lemma">fv_coll_subst</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="lambda_calculus.html#fv_coll_rm"><span class="id" type="lemma">fv_coll_rm</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="lambda_calculus.html#fv_coll_iota"><span class="id" type="lemma">fv_coll_iota</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> &lt;- <a class="idref" href="lambda_calculus.html#fv_coll_iota"><span class="id" type="lemma">fv_coll_iota</span></a>; <span class="id" type="tactic">auto</span> <span class="id" type="keyword">with</span> <span class="id" type="var">datatypes</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="L3_1_iv'"><span class="id" type="lemma">L3_1_iv'</span></a> : <span class="id" type="keyword">forall</span> (<span class="id" type="var">rho</span> <span class="id" type="var">eta</span> : <a class="idref" href="lambda_calculus.html#substitution"><span class="id" type="definition">substitution</span></a>)(<span class="id" type="var">L</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Init.Datatypes.html#list"><span class="id" type="inductive">list</span></a> <a class="idref" href="lambda_calculus.html#var"><span class="id" type="abbreviation">var</span></a>),<br/>
&nbsp;&nbsp;<a class="idref" href="lambda_calculus.html#subst_cong"><span class="id" type="definition">subst_cong</span></a> <span class="id" type="var">rho</span> <span class="id" type="var">eta</span> <span class="id" type="var">L</span> -&gt;<br/>
&nbsp;&nbsp;<a class="idref" href="lambda_calculus.html#fv_coll"><span class="id" type="definition">fv_coll</span></a> <span class="id" type="var">L</span> <span class="id" type="var">rho</span> <a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="lambda_calculus.html#fv_coll"><span class="id" type="definition">fv_coll</span></a> <span class="id" type="var">L</span> <span class="id" type="var">eta</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <span class="id" type="var">subst_cong</span>; <span class="id" type="tactic">induction</span> <span class="id" type="var">L</span>; <span class="id" type="tactic">simpl</span>; <span class="id" type="tactic">intros</span>; <span class="id" type="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">f_equal</span>; <span class="id" type="tactic">auto</span> <span class="id" type="keyword">using</span> <a class="idref" href="lambda_calculus.html#L3_1_iii"><span class="id" type="lemma">L3_1_iii</span></a>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Note that <span class="inlinecode"><span class="id" type="var">old</span></span> is the dual, finite countepart of <span class="inlinecode"><span class="id" type="var">new</span></span> in
   Stoughton's original paper. 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Lemma</span> <a name="L3_1_iv"><span class="id" type="lemma">L3_1_iv</span></a> : <span class="id" type="keyword">forall</span> (<span class="id" type="var">M</span> <span class="id" type="var">N</span> :<a class="idref" href="lambda_calculus.html#term"><span class="id" type="inductive">term</span></a>)(<span class="id" type="var">x</span> : <a class="idref" href="lambda_calculus.html#var"><span class="id" type="abbreviation">var</span></a>)(<span class="id" type="var">rho</span> <span class="id" type="var">eta</span> : <a class="idref" href="lambda_calculus.html#substitution"><span class="id" type="definition">substitution</span></a>),<br/>
&nbsp;&nbsp;<span class="id" type="var">M</span> <a class="idref" href="lambda_calculus.html#::x_'Eq'_x"><span class="id" type="notation">Eq</span></a> <span class="id" type="var">N</span> -&gt;<br/>
&nbsp;&nbsp;<a class="idref" href="lambda_calculus.html#subst_cong"><span class="id" type="definition">subst_cong</span></a> <span class="id" type="var">rho</span> <span class="id" type="var">eta</span> (<a class="idref" href="lambda_calculus.html#FV"><span class="id" type="definition">FV</span></a> <span class="id" type="var">M</span> <a class="idref" href="lists_decidable.html#DecidableIn.::x_'\'_'{'_x_'}'"><span class="id" type="notation">\</span></a> <a class="idref" href="lists_decidable.html#DecidableIn.::x_'\'_'{'_x_'}'"><span class="id" type="notation">{</span></a><span class="id" type="var">x</span><a class="idref" href="lists_decidable.html#DecidableIn.::x_'\'_'{'_x_'}'"><span class="id" type="notation">}</span></a>) -&gt;<br/>
&nbsp;&nbsp;<a class="idref" href="lambda_calculus.html#old"><span class="id" type="definition">old</span></a> <span class="id" type="var">x</span> <span class="id" type="var">M</span> <span class="id" type="var">rho</span> <a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="lambda_calculus.html#old"><span class="id" type="definition">old</span></a> <span class="id" type="var">x</span> <span class="id" type="var">N</span> <span class="id" type="var">eta</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <span class="id" type="var">old</span>, <span class="id" type="var">subst_cong</span>; <span class="id" type="tactic">intros</span> <span class="id" type="var">M</span> <span class="id" type="var">N</span> <span class="id" type="var">x</span> <span class="id" type="var">rho</span> <span class="id" type="var">eta</span> <span class="id" type="var">HEq</span> <span class="id" type="var">Hcong</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> &lt;- (<a class="idref" href="lambda_calculus.html#L3_1_iii"><span class="id" type="lemma">L3_1_iii</span></a> <span class="id" type="var">HEq</span>).<br/>
&nbsp;&nbsp;<span class="id" type="tactic">auto</span> <span class="id" type="keyword">using</span> <a class="idref" href="lambda_calculus.html#L3_1_iv'"><span class="id" type="lemma">L3_1_iv'</span></a>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="L3_1_v"><span class="id" type="lemma">L3_1_v</span></a> : <span class="id" type="keyword">forall</span> (<span class="id" type="var">M</span> : <a class="idref" href="lambda_calculus.html#term"><span class="id" type="inductive">term</span></a>)(<span class="id" type="var">rho</span> <span class="id" type="var">eta</span> : <a class="idref" href="lambda_calculus.html#substitution"><span class="id" type="definition">substitution</span></a>),<br/>
&nbsp;&nbsp;<a class="idref" href="lambda_calculus.html#Nat_dec.f_ext"><span class="id" type="definition">f_ext</span></a> <span class="id" type="var">rho</span> <span class="id" type="var">eta</span> (<a class="idref" href="lambda_calculus.html#FV"><span class="id" type="definition">FV</span></a> <span class="id" type="var">M</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id" type="var">M</span> <a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><span class="id" type="var">rho</span><a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <span class="id" type="var">M</span> <a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><span class="id" type="var">eta</span><a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <span class="id" type="var">f_ext</span>; <span class="id" type="tactic">induction</span> <span class="id" type="var">M</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">y</span> | | <span class="id" type="var">y</span> <span class="id" type="var">M'</span> <span class="id" type="var">HM'</span>]; <span class="id" type="tactic">simpl</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">rho</span> <span class="id" type="var">eta</span> <span class="id" type="var">Heq</span>; <span class="id" type="tactic">auto</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="var">Case</span> "M = App M1 M2".<br/>
&nbsp;&nbsp;<span class="id" type="tactic">f_equal</span>; <span class="id" type="tactic">auto</span> <span class="id" type="keyword">using</span> <span class="id" type="var">Heq</span> <span class="id" type="keyword">with</span> <span class="id" type="var">datatypes</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="var">Case</span> "M = Lam y M'".<br/>
&nbsp;&nbsp;<span class="id" type="tactic">f_equal</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">SCase</span> "binder case".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> (@<a class="idref" href="lambda_calculus.html#L3_1_iv"><span class="id" type="lemma">L3_1_iv</span></a> <span class="id" type="var">M'</span> <span class="id" type="var">M'</span> <span class="id" type="var">y</span> <span class="id" type="var">rho</span> <span class="id" type="var">eta</span> (<a class="idref" href="lambda_calculus.html#a_cong_refl"><span class="id" type="lemma">a_cong_refl</span></a> <span class="id" type="var">M'</span>)); <span class="id" type="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">red</span>; <span class="id" type="tactic">intros</span>; <span class="id" type="tactic">rewrite</span> <span class="id" type="var">Heq</span>; <span class="id" type="tactic">auto</span> <span class="id" type="keyword">using</span> <a class="idref" href="lambda_calculus.html#a_cong_refl"><span class="id" type="lemma">a_cong_refl</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">SCase</span> "body case".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">HM'</span>; <span class="id" type="tactic">intros</span>; <span class="id" type="tactic">unfold</span> <span class="id" type="var">up</span>; <span class="id" type="var">case_dec</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">SSCase</span> "x = y".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> (@<a class="idref" href="lambda_calculus.html#L3_1_iv"><span class="id" type="lemma">L3_1_iv</span></a> <span class="id" type="var">M'</span> <span class="id" type="var">M'</span> <span class="id" type="var">y</span> <span class="id" type="var">rho</span> <span class="id" type="var">eta</span> (<a class="idref" href="lambda_calculus.html#a_cong_refl"><span class="id" type="lemma">a_cong_refl</span></a> <span class="id" type="var">M'</span>)); <span class="id" type="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">red</span>; <span class="id" type="tactic">intros</span>; <span class="id" type="tactic">rewrite</span> <span class="id" type="var">Heq</span>; <span class="id" type="tactic">auto</span> <span class="id" type="keyword">using</span> <a class="idref" href="lambda_calculus.html#a_cong_refl"><span class="id" type="lemma">a_cong_refl</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">SSCase</span> "x &lt;&gt; y".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">auto</span> <span class="id" type="keyword">using</span> <span class="id" type="var">Heq</span>, <a class="idref" href="lambda_calculus.html#Nat_dec.in_rm_2"><span class="id" type="lemma">in_rm_2</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Functional extensionality w.r.t. the identity substitution 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Lemma</span> <a name="f_ext_iota"><span class="id" type="lemma">f_ext_iota</span></a> : <span class="id" type="keyword">forall</span> (<span class="id" type="var">L</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Init.Datatypes.html#list"><span class="id" type="inductive">list</span></a> <a class="idref" href="lambda_calculus.html#var"><span class="id" type="abbreviation">var</span></a>) (<span class="id" type="var">x</span> : <a class="idref" href="lambda_calculus.html#var"><span class="id" type="abbreviation">var</span></a>),<br/>
&nbsp;&nbsp;<a class="idref" href="lambda_calculus.html#Nat_dec.f_ext"><span class="id" type="definition">f_ext</span></a> (<a class="idref" href="lambda_calculus.html#iota"><span class="id" type="abbreviation">iota</span></a> <a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">[[</span></a><a class="idref" href="lambda_calculus.html#Var"><span class="id" type="constructor">Var</span></a> <span class="id" type="var">x</span> <a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">=&gt;</span></a> <span class="id" type="var">x</span><a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">]]</span></a>) <a class="idref" href="lambda_calculus.html#iota"><span class="id" type="abbreviation">iota</span></a> <span class="id" type="var">L</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">red</span>; <span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <span class="id" type="var">up</span>; <span class="id" type="var">case_dec</span>; <span class="id" type="tactic">auto</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="iota_ext"><span class="id" type="lemma">iota_ext</span></a> : <span class="id" type="keyword">forall</span> (<span class="id" type="var">x</span> : <a class="idref" href="lambda_calculus.html#var"><span class="id" type="abbreviation">var</span></a>), <br/>
&nbsp;&nbsp;<a class="idref" href="lambda_calculus.html#iota"><span class="id" type="abbreviation">iota</span></a> <a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">[[</span></a><a class="idref" href="lambda_calculus.html#Var"><span class="id" type="constructor">Var</span></a> <span class="id" type="var">x</span> <a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">=&gt;</span></a> <span class="id" type="var">x</span><a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">]]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="lambda_calculus.html#iota"><span class="id" type="abbreviation">iota</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">extensionality</span> <span class="id" type="var">y</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> (<span class="id" type="var">x</span> <a class="idref" href="lists_decidable.html#DecidableIn.::x_'=='_x"><span class="id" type="notation">==</span></a> <span class="id" type="var">y</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="tactic">subst</span>; <span class="id" type="var">rewrite_up</span>; <span class="id" type="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" type="var">rewrite_up</span>; <span class="id" type="tactic">congruence</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="f_ext_notin"><span class="id" type="lemma">f_ext_notin</span></a> : <span class="id" type="keyword">forall</span> (<span class="id" type="var">M</span> : <a class="idref" href="lambda_calculus.html#term"><span class="id" type="inductive">term</span></a>)(<span class="id" type="var">x</span> : <a class="idref" href="lambda_calculus.html#var"><span class="id" type="abbreviation">var</span></a>)(<span class="id" type="var">L</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Init.Datatypes.html#list"><span class="id" type="inductive">list</span></a> <a class="idref" href="lambda_calculus.html#var"><span class="id" type="abbreviation">var</span></a>),<br/>
&nbsp;&nbsp;<span class="id" type="var">x</span> <a class="idref" href="lists_decidable.html#::x_'#'_x"><span class="id" type="notation">#</span></a> <span class="id" type="var">L</span> -&gt; <br/>
&nbsp;&nbsp;<a class="idref" href="lambda_calculus.html#Nat_dec.f_ext"><span class="id" type="definition">f_ext</span></a> (<a class="idref" href="lambda_calculus.html#iota"><span class="id" type="abbreviation">iota</span></a> <a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">[[</span></a><span class="id" type="var">M</span> <a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">=&gt;</span></a> <span class="id" type="var">x</span><a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">]]</span></a>) <a class="idref" href="lambda_calculus.html#iota"><span class="id" type="abbreviation">iota</span></a> <span class="id" type="var">L</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">red</span>; <span class="id" type="tactic">unfold</span> <span class="id" type="var">up</span>; <span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" type="var">case_dec</span>; <span class="id" type="tactic">intuition</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Hint</span> <span class="id" type="keyword">Resolve</span> <a class="idref" href="lambda_calculus.html#f_ext_iota"><span class="id" type="lemma">f_ext_iota</span></a> <a class="idref" href="lambda_calculus.html#f_ext_notin"><span class="id" type="lemma">f_ext_notin</span></a> : <span class="id" type="var">datatypes</span>.<br/>

<br/>
</div>

<div class="doc">
The original proof of Lemma 3.1.(vi) is based on the symmetry
   of tha alpha congruence. It will be proved after Theorem 3.2., 
   where we can work without using the symmetry of the
   alpha-congruence. 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Lemma</span> <a name="L3_1_vii"><span class="id" type="lemma">L3_1_vii</span></a> : <span class="id" type="keyword">forall</span> (<span class="id" type="var">M</span> <span class="id" type="var">N</span> : <a class="idref" href="lambda_calculus.html#term"><span class="id" type="inductive">term</span></a>)(<span class="id" type="var">x</span> <span class="id" type="var">y</span> : <a class="idref" href="lambda_calculus.html#var"><span class="id" type="abbreviation">var</span></a>)(<span class="id" type="var">rho</span> : <a class="idref" href="lambda_calculus.html#substitution"><span class="id" type="definition">substitution</span></a>),<br/>
&nbsp;&nbsp;<a class="idref" href="lambda_calculus.html#alpha_cond"><span class="id" type="definition">alpha_cond</span></a> <span class="id" type="var">M</span> <span class="id" type="var">x</span> <span class="id" type="var">N</span> <span class="id" type="var">y</span> -&gt;<br/>
&nbsp;&nbsp;<a class="idref" href="lambda_calculus.html#old"><span class="id" type="definition">old</span></a> <span class="id" type="var">x</span> <span class="id" type="var">M</span> <span class="id" type="var">rho</span> <a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="lambda_calculus.html#old"><span class="id" type="definition">old</span></a> <span class="id" type="var">y</span> <span class="id" type="var">N</span> <span class="id" type="var">rho</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <span class="id" type="var">alpha_cond</span>, <span class="id" type="var">old</span>; <span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">H</span>; <span class="id" type="tactic">destruct</span> <span class="id" type="var">H</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">H'</span> <span class="id" type="var">HEq</span>].<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="var">Case</span> "\/-left".<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> (<a class="idref" href="lambda_calculus.html#L3_1_iii"><span class="id" type="lemma">L3_1_iii</span></a> <span class="id" type="var">HEq</span>); <span class="id" type="tactic">subst</span>; <span class="id" type="tactic">auto</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="var">Case</span> "\/-right".<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> &lt;- (<a class="idref" href="lambda_calculus.html#L3_1_iii"><span class="id" type="lemma">L3_1_iii</span></a> <span class="id" type="var">HEq</span>).<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="lambda_calculus.html#fv_coll_subst"><span class="id" type="lemma">fv_coll_subst</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">f_equal</span>; <span class="id" type="tactic">rewrite</span> <a class="idref" href="lambda_calculus.html#fv_coll_rm"><span class="id" type="lemma">fv_coll_rm</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> &lt;- <a class="idref" href="lambda_calculus.html#fv_coll_iota"><span class="id" type="lemma">fv_coll_iota</span></a>; <span class="id" type="tactic">auto</span> <span class="id" type="keyword">with</span> <span class="id" type="var">datatypes</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="L3_1_viii'"><span class="id" type="lemma">L3_1_viii'</span></a> : <span class="id" type="keyword">forall</span> (<span class="id" type="var">L</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Init.Datatypes.html#list"><span class="id" type="inductive">list</span></a> <a class="idref" href="lambda_calculus.html#var"><span class="id" type="abbreviation">var</span></a>)(<span class="id" type="var">x</span> <span class="id" type="var">y</span> : <a class="idref" href="lambda_calculus.html#var"><span class="id" type="abbreviation">var</span></a>)(<span class="id" type="var">rho</span> <span class="id" type="var">eta</span> : <a class="idref" href="lambda_calculus.html#substitution"><span class="id" type="definition">substitution</span></a>),<br/>
&nbsp;&nbsp;<span class="id" type="var">y</span> <a class="idref" href="lists_decidable.html#::x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="lambda_calculus.html#fv_coll"><span class="id" type="definition">fv_coll</span></a> (<span class="id" type="var">L</span> <a class="idref" href="lists_decidable.html#DecidableIn.::x_'\'_'{'_x_'}'"><span class="id" type="notation">\</span></a> <a class="idref" href="lists_decidable.html#DecidableIn.::x_'\'_'{'_x_'}'"><span class="id" type="notation">{</span></a><span class="id" type="var">x</span><a class="idref" href="lists_decidable.html#DecidableIn.::x_'\'_'{'_x_'}'"><span class="id" type="notation">}</span></a>) <span class="id" type="var">rho</span> -&gt;<br/>
&nbsp;&nbsp;<a class="idref" href="lambda_calculus.html#fv_coll"><span class="id" type="definition">fv_coll</span></a> (<span class="id" type="var">L</span> <a class="idref" href="lists_decidable.html#DecidableIn.::x_'\'_'{'_x_'}'"><span class="id" type="notation">\</span></a> <a class="idref" href="lists_decidable.html#DecidableIn.::x_'\'_'{'_x_'}'"><span class="id" type="notation">{</span></a><span class="id" type="var">x</span><a class="idref" href="lists_decidable.html#DecidableIn.::x_'\'_'{'_x_'}'"><span class="id" type="notation">}</span></a>) (<a class="idref" href="lambda_calculus.html#comp"><span class="id" type="definition">comp</span></a> <span class="id" type="var">eta</span> <span class="id" type="var">rho</span>) <a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="lambda_calculus.html#fv_coll"><span class="id" type="definition">fv_coll</span></a> (<a class="idref" href="lambda_calculus.html#fv_coll"><span class="id" type="definition">fv_coll</span></a> <span class="id" type="var">L</span> (<span class="id" type="var">rho</span> <a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">[[</span></a><a class="idref" href="lambda_calculus.html#Var"><span class="id" type="constructor">Var</span></a> <span class="id" type="var">y</span> <a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">=&gt;</span></a> <span class="id" type="var">x</span><a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">]]</span></a>) <a class="idref" href="lists_decidable.html#DecidableIn.::x_'\'_'{'_x_'}'"><span class="id" type="notation">\</span></a> <a class="idref" href="lists_decidable.html#DecidableIn.::x_'\'_'{'_x_'}'"><span class="id" type="notation">{</span></a><span class="id" type="var">y</span><a class="idref" href="lists_decidable.html#DecidableIn.::x_'\'_'{'_x_'}'"><span class="id" type="notation">}</span></a>) <span class="id" type="var">eta</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">induction</span> <span class="id" type="var">L</span> <span class="id" type="keyword">as</span> [ | <span class="id" type="var">z</span> <span class="id" type="var">L'</span> <span class="id" type="var">Hl'</span>]; <span class="id" type="tactic">simpl</span>; <span class="id" type="tactic">intros</span>; <span class="id" type="tactic">auto</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="var">Case</span> "L = z :: L'".<br/>
&nbsp;&nbsp;<span class="id" type="var">case_dec</span>. 
<br/>
&nbsp;&nbsp;<span class="id" type="var">SCase</span> "x = z".<br/>
&nbsp;&nbsp;<span class="id" type="var">rewrite_up</span>; <span class="id" type="tactic">simpl</span>; <span class="id" type="var">case_dec</span>; <span class="id" type="tactic">intuition</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="var">SCase</span> "x &lt;&gt; z".<br/>
&nbsp;&nbsp;<span class="id" type="var">rewrite_up</span>; <span class="id" type="tactic">simpl</span>; <span class="id" type="tactic">try</span> <span class="id" type="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id" type="var">rewrite_app</span>; <span class="id" type="tactic">rewrite</span> <a class="idref" href="lambda_calculus.html#fv_coll_app"><span class="id" type="lemma">fv_coll_app</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">f_equal</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="var">SSCase</span> "++=left".<br/>
&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <span class="id" type="var">comp</span>; <span class="id" type="tactic">rewrite</span> <a class="idref" href="lambda_calculus.html#fv_coll_subst"><span class="id" type="lemma">fv_coll_subst</span></a>; <span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" type="var">destr_app</span>; <span class="id" type="tactic">auto</span>; <span class="id" type="tactic">rewrite</span> <a class="idref" href="lambda_calculus.html#Nat_dec.notin_rm_3"><span class="id" type="lemma">notin_rm_3</span></a>; <span class="id" type="tactic">auto</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="var">SSCase</span> "++-right".<br/>
&nbsp;&nbsp;<span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> *; <span class="id" type="var">destr_app</span>; <span class="id" type="tactic">auto</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="L3_1_viii"><span class="id" type="lemma">L3_1_viii</span></a> : <span class="id" type="keyword">forall</span> (<span class="id" type="var">M</span> : <a class="idref" href="lambda_calculus.html#term"><span class="id" type="inductive">term</span></a>)(<span class="id" type="var">x</span> <span class="id" type="var">y</span> : <a class="idref" href="lambda_calculus.html#var"><span class="id" type="abbreviation">var</span></a>)(<span class="id" type="var">rho</span> <span class="id" type="var">eta</span> : <a class="idref" href="lambda_calculus.html#substitution"><span class="id" type="definition">substitution</span></a>),<br/>
&nbsp;&nbsp;<span class="id" type="var">y</span> <a class="idref" href="lists_decidable.html#::x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="lists_decidable.html#::x_'#'_x"><span class="id" type="notation">(</span></a><a class="idref" href="lambda_calculus.html#old"><span class="id" type="definition">old</span></a> <span class="id" type="var">x</span> <span class="id" type="var">M</span> <span class="id" type="var">rho</span><a class="idref" href="lists_decidable.html#::x_'#'_x"><span class="id" type="notation">)</span></a> -&gt;<br/>
&nbsp;&nbsp;<a class="idref" href="lambda_calculus.html#old"><span class="id" type="definition">old</span></a> <span class="id" type="var">x</span> <span class="id" type="var">M</span> (<a class="idref" href="lambda_calculus.html#comp"><span class="id" type="definition">comp</span></a> <span class="id" type="var">eta</span> <span class="id" type="var">rho</span>) <a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="lambda_calculus.html#old"><span class="id" type="definition">old</span></a> <span class="id" type="var">y</span> (<span class="id" type="var">M</span> <a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><span class="id" type="var">rho</span> <a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">[[</span></a><a class="idref" href="lambda_calculus.html#Var"><span class="id" type="constructor">Var</span></a> <span class="id" type="var">y</span> <a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">=&gt;</span></a> <span class="id" type="var">x</span><a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">]]</span></a><a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a>) <span class="id" type="var">eta</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <span class="id" type="var">old</span>; <span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="lambda_calculus.html#fv_coll_subst"><span class="id" type="lemma">fv_coll_subst</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="lambda_calculus.html#L3_1_viii'"><span class="id" type="lemma">L3_1_viii'</span></a>; <span class="id" type="tactic">auto</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Syntactic Substitution Theorem:
<ul>
<li> Performaing the composition of two substitutions yields the same
     result as performing those substitutions sequentially. 
</li>
</ul>

</div>
<div class="code">

<br/>
<span class="id" type="keyword">Lemma</span> <a name="fv_coll_notin_1"><span class="id" type="lemma">fv_coll_notin_1</span></a> : <span class="id" type="keyword">forall</span> (<span class="id" type="var">L</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Init.Datatypes.html#list"><span class="id" type="inductive">list</span></a> <a class="idref" href="lambda_calculus.html#var"><span class="id" type="abbreviation">var</span></a>)(<span class="id" type="var">x</span> <span class="id" type="var">x0</span> <span class="id" type="var">x1</span> <span class="id" type="var">y</span> : <a class="idref" href="lambda_calculus.html#var"><span class="id" type="abbreviation">var</span></a>)(<span class="id" type="var">rho</span> : <a class="idref" href="lambda_calculus.html#substitution"><span class="id" type="definition">substitution</span></a>),<br/>
&nbsp;&nbsp;<span class="id" type="var">y</span> <a class="idref" href="lists_decidable.html#::x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="lambda_calculus.html#fv_coll"><span class="id" type="definition">fv_coll</span></a> (<span class="id" type="var">L</span> <a class="idref" href="lists_decidable.html#DecidableIn.::x_'\'_'{'_x_'}'"><span class="id" type="notation">\</span></a> <a class="idref" href="lists_decidable.html#DecidableIn.::x_'\'_'{'_x_'}'"><span class="id" type="notation">{</span></a><span class="id" type="var">x</span><a class="idref" href="lists_decidable.html#DecidableIn.::x_'\'_'{'_x_'}'"><span class="id" type="notation">}</span></a>) <span class="id" type="var">rho</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id" type="var">x0</span> <a class="idref" href="lists_decidable.html#::x_'@'_x"><span class="id" type="notation">@</span></a> <span class="id" type="var">L</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id" type="var">x</span> <a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Init.Logic.html#:type_scope:x_'<>'_x"><span class="id" type="notation">&lt;&gt;</span></a> <span class="id" type="var">x0</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id" type="var">x1</span> <a class="idref" href="lists_decidable.html#::x_'@'_x"><span class="id" type="notation">@</span></a> <a class="idref" href="lambda_calculus.html#FV"><span class="id" type="definition">FV</span></a> (<span class="id" type="var">rho</span> <span class="id" type="var">x0</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id" type="var">x1</span> <a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Init.Logic.html#:type_scope:x_'<>'_x"><span class="id" type="notation">&lt;&gt;</span></a> <span class="id" type="var">y</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">red</span>; <span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">subst</span> <span class="id" type="var">x1</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">elim</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="lambda_calculus.html#L3_1_ii'"><span class="id" type="lemma">L3_1_ii'</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="var">exists</span> <span class="id" type="var">x0</span>; <span class="id" type="tactic">firstorder</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="fv_coll_notin_2"><span class="id" type="lemma">fv_coll_notin_2</span></a> : <span class="id" type="keyword">forall</span> (<span class="id" type="var">L</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Init.Datatypes.html#list"><span class="id" type="inductive">list</span></a> <a class="idref" href="lambda_calculus.html#var"><span class="id" type="abbreviation">var</span></a>)(<span class="id" type="var">x</span> <span class="id" type="var">y</span> : <a class="idref" href="lambda_calculus.html#var"><span class="id" type="abbreviation">var</span></a>),<br/>
&nbsp;&nbsp;<span class="id" type="var">x</span> <a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Init.Logic.html#:type_scope:x_'<>'_x"><span class="id" type="notation">&lt;&gt;</span></a> <span class="id" type="var">y</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id" type="var">x</span> <a class="idref" href="lists_decidable.html#::x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="lambda_calculus.html#fv_coll"><span class="id" type="definition">fv_coll</span></a> <span class="id" type="var">L</span> (<a class="idref" href="lambda_calculus.html#iota"><span class="id" type="abbreviation">iota</span></a> <a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">[[</span></a><a class="idref" href="lambda_calculus.html#Var"><span class="id" type="constructor">Var</span></a> <span class="id" type="var">y</span> <a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">=&gt;</span></a> <span class="id" type="var">x</span><a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">]]</span></a>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">red</span>; <span class="id" type="tactic">intros</span> <span class="id" type="var">L</span> <span class="id" type="var">x</span> <span class="id" type="var">y</span> <span class="id" type="var">Hneq</span> <span class="id" type="var">Hin0</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">generalize</span> (<a class="idref" href="lambda_calculus.html#L3_1_ii'"><span class="id" type="lemma">L3_1_ii'</span></a> <span class="id" type="var">L</span> <span class="id" type="var">x</span> (<a class="idref" href="lambda_calculus.html#iota"><span class="id" type="abbreviation">iota</span></a> <a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">[[</span></a><a class="idref" href="lambda_calculus.html#Var"><span class="id" type="constructor">Var</span></a> <span class="id" type="var">y</span> <a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">=&gt;</span></a> <span class="id" type="var">x</span><a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">]]</span></a>)); <span class="id" type="tactic">intro</span> <span class="id" type="var">Hand</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">Hand</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">HandL</span> <span class="id" type="var">HandR</span>]; <span class="id" type="tactic">clear</span> <span class="id" type="var">HandR</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> (<span class="id" type="var">HandL</span> <span class="id" type="var">Hin0</span>) <span class="id" type="keyword">as</span> [<span class="id" type="var">z</span> <span class="id" type="var">Hand1</span>]; <span class="id" type="tactic">clear</span> <span class="id" type="var">HandL</span> <span class="id" type="var">Hin0</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">Hand1</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">Hand1L</span> <span class="id" type="var">Hand1R</span>].<br/>
&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <span class="id" type="var">up</span> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" type="var">case_dec</span>; <span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> *; <span class="id" type="tactic">intuition</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Theorem</span> <a name="T3_2"><span class="id" type="lemma">T3_2</span></a> : <span class="id" type="keyword">forall</span> (<span class="id" type="var">M</span> : <a class="idref" href="lambda_calculus.html#term"><span class="id" type="inductive">term</span></a>) (<span class="id" type="var">rho</span> <span class="id" type="var">eta</span> : <a class="idref" href="lambda_calculus.html#substitution"><span class="id" type="definition">substitution</span></a>),<br/>
&nbsp;&nbsp;<a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">(</span></a><span class="id" type="var">M</span> <a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><span class="id" type="var">rho</span><a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">}})</span></a> <a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><span class="id" type="var">eta</span><a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <span class="id" type="var">M</span> <a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><a class="idref" href="lambda_calculus.html#comp"><span class="id" type="definition">comp</span></a> <span class="id" type="var">eta</span> <span class="id" type="var">rho</span><a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">induction</span> <span class="id" type="var">M</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">x</span> | | <span class="id" type="var">x</span> <span class="id" type="var">M'</span> <span class="id" type="var">HM'</span>]; <span class="id" type="tactic">simpl</span>; <span class="id" type="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[ | <span class="id" type="tactic">f_equal</span> | ]; <span class="id" type="tactic">auto</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="var">Case</span> "M = Lam x M'".<br/>
&nbsp;&nbsp;<span class="id" type="var">remember</span> (<a class="idref" href="fresh_variables.html#Nat.choice"><span class="id" type="definition">choice</span></a>(<a class="idref" href="lambda_calculus.html#old"><span class="id" type="definition">old</span></a> <span class="id" type="var">x</span> <span class="id" type="var">M'</span> <span class="id" type="var">rho</span>)) <span class="id" type="keyword">as</span> <span class="id" type="var">y</span>.<br/>
&nbsp;&nbsp;<span class="id" type="var">remember</span> (<a class="idref" href="fresh_variables.html#Nat.choice"><span class="id" type="definition">choice</span></a>(<a class="idref" href="lambda_calculus.html#old"><span class="id" type="definition">old</span></a> <span class="id" type="var">y</span> (<span class="id" type="var">M'</span> <a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><span class="id" type="var">rho</span> <a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">[[</span></a><a class="idref" href="lambda_calculus.html#Var"><span class="id" type="constructor">Var</span></a> <span class="id" type="var">y</span> <a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">=&gt;</span></a> <span class="id" type="var">x</span><a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">]]</span></a><a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a>) <span class="id" type="var">eta</span>)) <span class="id" type="keyword">as</span> <span class="id" type="var">y'</span>.<br/>
&nbsp;&nbsp;<span class="id" type="var">remember</span> (<a class="idref" href="fresh_variables.html#Nat.choice"><span class="id" type="definition">choice</span></a>(<a class="idref" href="lambda_calculus.html#old"><span class="id" type="definition">old</span></a> <span class="id" type="var">x</span> <span class="id" type="var">M'</span> (<a class="idref" href="lambda_calculus.html#comp"><span class="id" type="definition">comp</span></a> <span class="id" type="var">eta</span> <span class="id" type="var">rho</span>))) <span class="id" type="keyword">as</span> <span class="id" type="var">z</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<span class="id" type="var">y'</span> <a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <span class="id" type="var">z</span>) <span class="id" type="keyword">as</span> <span class="id" type="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">subst</span> <span class="id" type="var">y'</span> <span class="id" type="var">z</span>; <span class="id" type="tactic">rewrite</span> &lt;- <a class="idref" href="lambda_calculus.html#L3_1_viii"><span class="id" type="lemma">L3_1_viii</span></a>; <span class="id" type="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">subst</span> <span class="id" type="var">y</span>; <span class="id" type="tactic">apply</span> <a class="idref" href="fresh_variables.html#Nat.choice_fresh"><span class="id" type="lemma">choice_fresh</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="tactic">f_equal</span>; <span class="id" type="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">HM'</span>. <span class="id" type="tactic">apply</span> <a class="idref" href="lambda_calculus.html#L3_1_v"><span class="id" type="lemma">L3_1_v</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">red</span>; <span class="id" type="tactic">unfold</span> <span class="id" type="var">comp</span>; <span class="id" type="tactic">intros</span>; <span class="id" type="tactic">destruct</span> (<span class="id" type="var">x</span> <a class="idref" href="lists_decidable.html#DecidableIn.::x_'=='_x"><span class="id" type="notation">==</span></a> <span class="id" type="var">x0</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="var">SCase</span> "x = x0".<br/>
&nbsp;&nbsp;<span class="id" type="tactic">subst</span> <span class="id" type="var">x0</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">do</span> 2 <span class="id" type="var">rewrite_up</span>; <span class="id" type="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" type="var">rewrite_up</span>; <span class="id" type="tactic">congruence</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="var">SCase</span> "x &lt;&gt; x0".<br/>
&nbsp;&nbsp;<span class="id" type="tactic">do</span> 2 <span class="id" type="var">rewrite_up</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="lambda_calculus.html#L3_1_v"><span class="id" type="lemma">L3_1_v</span></a>; <span class="id" type="tactic">red</span>; <span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" type="var">rewrite_up</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">generalize</span> (<a class="idref" href="fresh_variables.html#Nat.choice_fresh"><span class="id" type="lemma">choice_fresh</span></a> (<a class="idref" href="lambda_calculus.html#old"><span class="id" type="definition">old</span></a> <span class="id" type="var">x</span> <span class="id" type="var">M'</span> <span class="id" type="var">rho</span>)); <span class="id" type="tactic">intro</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> &lt;- <span class="id" type="var">Heqy</span> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <span class="id" type="var">old</span> <span class="id" type="keyword">in</span> *; <span class="id" type="tactic">eapply</span> (<a class="idref" href="lambda_calculus.html#fv_coll_notin_1"><span class="id" type="lemma">fv_coll_notin_1</span></a>); <span class="id" type="tactic">eauto</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Now we can prove the original form of Lemma 3.1.(vi).
   The proof is a bit long because we cannot use the symmetry
   of the alpha congruence. Indeed, we need Lemma 3.1.(vi) in order to
   prove the symmetry of the alpha congruence.

<br/> <br/>
   If we had the symmtry the proof will become much shortet as
   demonstrated by <span class="inlinecode"><span class="id" type="var">L3_1_vi'</span></span>. 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Lemma</span> <a name="L3_1_vi"><span class="id" type="lemma">L3_1_vi</span></a> : <span class="id" type="keyword">forall</span> (<span class="id" type="var">M</span> : <a class="idref" href="lambda_calculus.html#term"><span class="id" type="inductive">term</span></a>), <span class="id" type="var">M</span> <a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><a class="idref" href="lambda_calculus.html#iota"><span class="id" type="abbreviation">iota</span></a><a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <a class="idref" href="lambda_calculus.html#::x_'Eq'_x"><span class="id" type="notation">Eq</span></a> <span class="id" type="var">M</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">induction</span> <span class="id" type="var">M</span> <span class="id" type="keyword">as</span> [ | | <span class="id" type="var">x</span> <span class="id" type="var">M'</span>]; <span class="id" type="tactic">simpl</span>; <span class="id" type="tactic">auto</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="var">Case</span> "M = Lam x M'".<br/>
&nbsp;&nbsp;<span class="id" type="var">remember</span> (<a class="idref" href="fresh_variables.html#Nat.choice"><span class="id" type="definition">choice</span></a> (<a class="idref" href="lambda_calculus.html#old"><span class="id" type="definition">old</span></a> <span class="id" type="var">x</span> <span class="id" type="var">M'</span> <a class="idref" href="lambda_calculus.html#iota"><span class="id" type="abbreviation">iota</span></a>)) <span class="id" type="keyword">as</span> <span class="id" type="var">y</span>. <span class="id" type="tactic">destruct</span> (<span class="id" type="var">x</span> <a class="idref" href="lists_decidable.html#DecidableIn.::x_'=='_x"><span class="id" type="notation">==</span></a> <span class="id" type="var">y</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="var">SCase</span> "x = y".<br/>
&nbsp;&nbsp;<span class="id" type="tactic">subst</span> <span class="id" type="var">x</span>. <span class="id" type="tactic">apply</span> <a class="idref" href="lambda_calculus.html#al_lam_eq"><span class="id" type="constructor">al_lam_eq</span></a>; <span class="id" type="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> (@<a class="idref" href="lambda_calculus.html#L3_1_v"><span class="id" type="lemma">L3_1_v</span></a> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <a class="idref" href="lambda_calculus.html#iota"><span class="id" type="abbreviation">iota</span></a>); <span class="id" type="tactic">auto</span> <span class="id" type="keyword">using</span> <a class="idref" href="lambda_calculus.html#f_ext_iota"><span class="id" type="lemma">f_ext_iota</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="var">SCase</span> "x &lt;&gt; y".<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="lambda_calculus.html#al_lam_notin"><span class="id" type="constructor">al_lam_notin</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="var">SSCase</span> "binder case".<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> (<a class="idref" href="lambda_calculus.html#fv_coll_subst"><span class="id" type="lemma">fv_coll_subst</span></a>). <span class="id" type="tactic">unfold</span> <span class="id" type="var">old</span> <span class="id" type="keyword">in</span> *; <span class="id" type="tactic">rewrite</span> &lt;- <a class="idref" href="lambda_calculus.html#fv_coll_iota"><span class="id" type="lemma">fv_coll_iota</span></a> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="lambda_calculus.html#fv_coll_notin_2"><span class="id" type="lemma">fv_coll_notin_2</span></a>; <span class="id" type="tactic">auto</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="var">SSCase</span> "body case".<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="lambda_calculus.html#T3_2"><span class="id" type="lemma">T3_2</span></a>. <span class="id" type="tactic">rewrite</span> (@<a class="idref" href="lambda_calculus.html#L3_1_v"><span class="id" type="lemma">L3_1_v</span></a> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <a class="idref" href="lambda_calculus.html#iota"><span class="id" type="abbreviation">iota</span></a>); <span class="id" type="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <span class="id" type="var">f_ext</span>, <span class="id" type="var">comp</span>; <span class="id" type="tactic">intros</span>. <span class="id" type="tactic">destruct</span> (<span class="id" type="var">x</span> <a class="idref" href="lists_decidable.html#DecidableIn.::x_'=='_x"><span class="id" type="notation">==</span></a> <span class="id" type="var">x0</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="var">SSSCase</span> "x = x0".<br/>
&nbsp;&nbsp;<span class="id" type="tactic">subst</span> <span class="id" type="var">x</span>; <span class="id" type="tactic">do</span> 2 (<span class="id" type="tactic">rewrite</span> <a class="idref" href="lambda_calculus.html#Nat_dec.up_new"><span class="id" type="lemma">up_new</span></a>; <span class="id" type="tactic">simpl</span>); <span class="id" type="tactic">auto</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="var">SSSCase</span> "x &lt;&gt; x0".<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="lambda_calculus.html#Nat_dec.up_old"><span class="id" type="lemma">up_old</span></a>; <span class="id" type="tactic">auto</span>; <span class="id" type="tactic">simpl</span>; <span class="id" type="tactic">unfold</span> <span class="id" type="var">old</span> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<span class="id" type="var">x0</span> <a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Init.Logic.html#:type_scope:x_'<>'_x"><span class="id" type="notation">&lt;&gt;</span></a> <span class="id" type="var">y</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">generalize</span> (<a class="idref" href="fresh_variables.html#Nat.choice_fresh"><span class="id" type="lemma">choice_fresh</span></a> (<a class="idref" href="lambda_calculus.html#old"><span class="id" type="definition">old</span></a> <span class="id" type="var">x</span> <span class="id" type="var">M'</span> <a class="idref" href="lambda_calculus.html#iota"><span class="id" type="abbreviation">iota</span></a>)); <span class="id" type="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <span class="id" type="var">old</span> <span class="id" type="keyword">in</span> *; <span class="id" type="tactic">rewrite</span> &lt;- <span class="id" type="var">Heqy</span> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">eapply</span> <a class="idref" href="lambda_calculus.html#fv_coll_notin_1"><span class="id" type="lemma">fv_coll_notin_1</span></a>; <span class="id" type="tactic">eauto</span>; <span class="id" type="tactic">simpl</span>; <span class="id" type="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="lambda_calculus.html#Nat_dec.up_old"><span class="id" type="lemma">up_old</span></a>; <span class="id" type="tactic">auto</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
From <span class="inlinecode"><span class="id" type="var">L3_1_v</span></span> and <span class="inlinecode"><span class="id" type="var">L3_1_vi</span></span>, if <span class="inlinecode"><span class="id" type="var">x</span> # <span class="id" type="var">FV</span> <span class="id" type="var">M</span></span> then
   <span class="inlinecode"><span class="id" type="var">M</span> {{<span class="id" type="var">iota</span> [[<span class="id" type="var">N</span> =&gt; <span class="id" type="var">x</span>]]}} <span class="id" type="var">Eq</span> <span class="id" type="var">M</span></span>.
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Remark</span> <a name="R3_1_v_and_vi"><span class="id" type="lemma">R3_1_v_and_vi</span></a> : <span class="id" type="keyword">forall</span> (<span class="id" type="var">M</span> <span class="id" type="var">N</span> : <a class="idref" href="lambda_calculus.html#term"><span class="id" type="inductive">term</span></a>)(<span class="id" type="var">x</span> : <a class="idref" href="lambda_calculus.html#var"><span class="id" type="abbreviation">var</span></a>),<br/>
&nbsp;&nbsp;<span class="id" type="var">x</span> <a class="idref" href="lists_decidable.html#::x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="lambda_calculus.html#FV"><span class="id" type="definition">FV</span></a> <span class="id" type="var">M</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id" type="var">M</span> <a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><a class="idref" href="lambda_calculus.html#iota"><span class="id" type="abbreviation">iota</span></a> <a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">[[</span></a><span class="id" type="var">N</span> <a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">=&gt;</span></a> <span class="id" type="var">x</span><a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">]]</span></a><a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <a class="idref" href="lambda_calculus.html#::x_'Eq'_x"><span class="id" type="notation">Eq</span></a> <span class="id" type="var">M</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<span class="id" type="var">M</span> <a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><a class="idref" href="lambda_calculus.html#iota"><span class="id" type="abbreviation">iota</span></a><a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <span class="id" type="var">M</span> <a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><a class="idref" href="lambda_calculus.html#iota"><span class="id" type="abbreviation">iota</span></a> <a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">[[</span></a><span class="id" type="var">N</span> <a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">=&gt;</span></a> <span class="id" type="var">x</span><a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">]]</span></a><a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a>) <span class="id" type="keyword">as</span> <span class="id" type="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="lambda_calculus.html#L3_1_v"><span class="id" type="lemma">L3_1_v</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">red</span>; <span class="id" type="tactic">intros</span>. <span class="id" type="tactic">rewrite</span> <a class="idref" href="lambda_calculus.html#Nat_dec.up_old"><span class="id" type="lemma">up_old</span></a>; <span class="id" type="tactic">intuition</span> <span class="id" type="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> &lt;- <span class="id" type="var">Heq</span>; <span class="id" type="tactic">apply</span> <a class="idref" href="lambda_calculus.html#L3_1_vi"><span class="id" type="lemma">L3_1_vi</span></a>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Corollary</span> <a name="C3_3'"><span class="id" type="lemma">C3_3'</span></a> : <span class="id" type="keyword">forall</span> (<span class="id" type="var">M</span> <span class="id" type="var">N</span> : <a class="idref" href="lambda_calculus.html#term"><span class="id" type="inductive">term</span></a>)(<span class="id" type="var">x</span> <span class="id" type="var">y</span> : <a class="idref" href="lambda_calculus.html#var"><span class="id" type="abbreviation">var</span></a>)(<span class="id" type="var">rho</span> : <a class="idref" href="lambda_calculus.html#substitution"><span class="id" type="definition">substitution</span></a>),<br/>
&nbsp;&nbsp;<span class="id" type="var">y</span> <a class="idref" href="lists_decidable.html#::x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="lists_decidable.html#::x_'#'_x"><span class="id" type="notation">(</span></a><a class="idref" href="lambda_calculus.html#FV"><span class="id" type="definition">FV</span></a> <span class="id" type="var">M</span> <a class="idref" href="lists_decidable.html#DecidableIn.::x_'\'_'{'_x_'}'"><span class="id" type="notation">\</span></a> <a class="idref" href="lists_decidable.html#DecidableIn.::x_'\'_'{'_x_'}'"><span class="id" type="notation">{</span></a><span class="id" type="var">x</span><a class="idref" href="lists_decidable.html#DecidableIn.::x_'\'_'{'_x_'}'"><span class="id" type="notation">}</span></a><a class="idref" href="lists_decidable.html#::x_'#'_x"><span class="id" type="notation">)</span></a> -&gt;<br/>
&nbsp;&nbsp;<a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">(</span></a><span class="id" type="var">M</span> <a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><a class="idref" href="lambda_calculus.html#iota"><span class="id" type="abbreviation">iota</span></a> <a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">[[</span></a><a class="idref" href="lambda_calculus.html#Var"><span class="id" type="constructor">Var</span></a> <span class="id" type="var">y</span> <a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">=&gt;</span></a> <span class="id" type="var">x</span><a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">]]</span></a><a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">}})</span></a> <a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><span class="id" type="var">rho</span> <a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">[[</span></a><span class="id" type="var">N</span> <a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">=&gt;</span></a> <span class="id" type="var">y</span><a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">]]</span></a><a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <span class="id" type="var">M</span> <a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><span class="id" type="var">rho</span> <a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">[[</span></a><span class="id" type="var">N</span> <a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">=&gt;</span></a> <span class="id" type="var">x</span><a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">]]</span></a><a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span>. <span class="id" type="tactic">rewrite</span> <a class="idref" href="lambda_calculus.html#T3_2"><span class="id" type="lemma">T3_2</span></a>. <span class="id" type="tactic">apply</span> <a class="idref" href="lambda_calculus.html#L3_1_v"><span class="id" type="lemma">L3_1_v</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <span class="id" type="var">f_ext</span>, <span class="id" type="var">comp</span>; <span class="id" type="tactic">intros</span>. <span class="id" type="tactic">destruct</span> (<span class="id" type="var">x</span> <a class="idref" href="lists_decidable.html#DecidableIn.::x_'=='_x"><span class="id" type="notation">==</span></a> <span class="id" type="var">x0</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="var">Case</span> "x = x0".<br/>
&nbsp;&nbsp;<span class="id" type="tactic">subst</span> <span class="id" type="var">x0</span>; <span class="id" type="tactic">repeat</span> (<span class="id" type="tactic">rewrite</span> <a class="idref" href="lambda_calculus.html#Nat_dec.up_new"><span class="id" type="lemma">up_new</span></a>; <span class="id" type="tactic">simpl</span>); <span class="id" type="tactic">reflexivity</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="var">Case</span> "x &lt;&gt; x0".<br/>
&nbsp;&nbsp;<span class="id" type="tactic">repeat</span> (<span class="id" type="tactic">rewrite</span> <a class="idref" href="lambda_calculus.html#Nat_dec.up_old"><span class="id" type="lemma">up_old</span></a>; <span class="id" type="tactic">auto</span>; <span class="id" type="tactic">simpl</span>).<br/>
&nbsp;&nbsp;<span class="id" type="tactic">red</span>; <span class="id" type="tactic">intro</span>; <span class="id" type="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">elim</span> <span class="id" type="var">H</span>; <span class="id" type="tactic">auto</span> <span class="id" type="keyword">with</span> <span class="id" type="var">datatypes</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Corollary</span> <a name="C3_3"><span class="id" type="lemma">C3_3</span></a> : <span class="id" type="keyword">forall</span> (<span class="id" type="var">M</span> <span class="id" type="var">N</span> : <a class="idref" href="lambda_calculus.html#term"><span class="id" type="inductive">term</span></a>)(<span class="id" type="var">x</span> <span class="id" type="var">y</span> : <a class="idref" href="lambda_calculus.html#var"><span class="id" type="abbreviation">var</span></a>)(<span class="id" type="var">rho</span> : <a class="idref" href="lambda_calculus.html#substitution"><span class="id" type="definition">substitution</span></a>),<br/>
&nbsp;&nbsp;<span class="id" type="var">y</span> <a class="idref" href="lists_decidable.html#::x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="lambda_calculus.html#FV"><span class="id" type="definition">FV</span></a> <span class="id" type="var">M</span> -&gt;<br/>
&nbsp;&nbsp;<a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">(</span></a><span class="id" type="var">M</span> <a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><a class="idref" href="lambda_calculus.html#iota"><span class="id" type="abbreviation">iota</span></a> <a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">[[</span></a><a class="idref" href="lambda_calculus.html#Var"><span class="id" type="constructor">Var</span></a> <span class="id" type="var">y</span> <a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">=&gt;</span></a> <span class="id" type="var">x</span><a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">]]</span></a><a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">}})</span></a> <a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><span class="id" type="var">rho</span> <a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">[[</span></a><span class="id" type="var">N</span> <a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">=&gt;</span></a> <span class="id" type="var">y</span><a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">]]</span></a><a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <span class="id" type="var">M</span> <a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><span class="id" type="var">rho</span> <a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">[[</span></a><span class="id" type="var">N</span> <a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">=&gt;</span></a> <span class="id" type="var">x</span><a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">]]</span></a><a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span>; <span class="id" type="tactic">auto</span> <span class="id" type="keyword">using</span> <a class="idref" href="lambda_calculus.html#C3_3'"><span class="id" type="lemma">C3_3'</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">datatypes</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Corollary</span> <a name="C3_4_i_1"><span class="id" type="lemma">C3_4_i_1</span></a> : <span class="id" type="keyword">forall</span> (<span class="id" type="var">rho</span> : <a class="idref" href="lambda_calculus.html#substitution"><span class="id" type="definition">substitution</span></a>),<br/>
&nbsp;&nbsp;<a class="idref" href="lambda_calculus.html#subst_cong'"><span class="id" type="definition">subst_cong'</span></a> (<a class="idref" href="lambda_calculus.html#comp"><span class="id" type="definition">comp</span></a> <a class="idref" href="lambda_calculus.html#iota"><span class="id" type="abbreviation">iota</span></a> <span class="id" type="var">rho</span>) <span class="id" type="var">rho</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <span class="id" type="var">subst_cong'</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <span class="id" type="var">comp</span>; <span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="lambda_calculus.html#L3_1_vi"><span class="id" type="lemma">L3_1_vi</span></a>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Corollary</span> <a name="C3_4_i_2"><span class="id" type="lemma">C3_4_i_2</span></a> : <span class="id" type="keyword">forall</span> (<span class="id" type="var">rho</span> : <a class="idref" href="lambda_calculus.html#substitution"><span class="id" type="definition">substitution</span></a>),<br/>
&nbsp;&nbsp;<span class="id" type="var">rho</span> <a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">(</span></a><a class="idref" href="lambda_calculus.html#comp"><span class="id" type="definition">comp</span></a> <span class="id" type="var">rho</span> <a class="idref" href="lambda_calculus.html#iota"><span class="id" type="abbreviation">iota</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">)</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <span class="id" type="var">comp</span>; <span class="id" type="tactic">simpl</span>; <span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">extensionality</span> <span class="id" type="var">x</span>; <span class="id" type="tactic">auto</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Corollary</span> <a name="C3_4_ii"><span class="id" type="lemma">C3_4_ii</span></a> : <span class="id" type="keyword">forall</span> (<span class="id" type="var">rho1</span> <span class="id" type="var">rho2</span> <span class="id" type="var">rho3</span> : <a class="idref" href="lambda_calculus.html#substitution"><span class="id" type="definition">substitution</span></a>),<br/>
&nbsp;&nbsp;<a class="idref" href="lambda_calculus.html#comp"><span class="id" type="definition">comp</span></a> <span class="id" type="var">rho3</span> (<a class="idref" href="lambda_calculus.html#comp"><span class="id" type="definition">comp</span></a> <span class="id" type="var">rho2</span> <span class="id" type="var">rho1</span>) <a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="lambda_calculus.html#comp"><span class="id" type="definition">comp</span></a> (<a class="idref" href="lambda_calculus.html#comp"><span class="id" type="definition">comp</span></a> <span class="id" type="var">rho3</span> <span class="id" type="var">rho2</span>) <span class="id" type="var">rho1</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <span class="id" type="var">comp</span>; <span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">extensionality</span> <span class="id" type="var">x</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="lambda_calculus.html#T3_2"><span class="id" type="lemma">T3_2</span></a>; <span class="id" type="tactic">auto</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
alpha-congruent become eqaul when substitution is applied. 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Theorem</span> <a name="T3_5"><span class="id" type="lemma">T3_5</span></a> : <span class="id" type="keyword">forall</span> (<span class="id" type="var">M</span> <span class="id" type="var">N</span> : <a class="idref" href="lambda_calculus.html#term"><span class="id" type="inductive">term</span></a>),<br/>
&nbsp;&nbsp;<span class="id" type="var">M</span> <a class="idref" href="lambda_calculus.html#::x_'Eq'_x"><span class="id" type="notation">Eq</span></a> <span class="id" type="var">N</span> -&gt; <span class="id" type="keyword">forall</span> <span class="id" type="var">rho</span>, <span class="id" type="var">M</span> <a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><span class="id" type="var">rho</span><a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <span class="id" type="var">N</span> <a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><span class="id" type="var">rho</span><a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">induction</span> 1; <span class="id" type="tactic">simpl</span>; <span class="id" type="tactic">intros</span>; [ | <span class="id" type="tactic">f_equal</span> | | ]; <span class="id" type="tactic">auto</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="var">Case</span> "al_lam_eq".<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHa_cong</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> (@<a class="idref" href="lambda_calculus.html#L3_1_vii"><span class="id" type="lemma">L3_1_vii</span></a> <span class="id" type="var">M</span> <span class="id" type="var">N</span> <span class="id" type="var">x</span> <span class="id" type="var">y</span>); [<span class="id" type="tactic">subst</span>; <span class="id" type="tactic">reflexivity</span> | ].<br/>
&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <span class="id" type="var">alpha_cond</span>; <span class="id" type="tactic">firstorder</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="var">Case</span> "al_lam_notin".<br/>
&nbsp;&nbsp;<span class="id" type="var">remember</span> (<a class="idref" href="fresh_variables.html#Nat.choice"><span class="id" type="definition">choice</span></a> (<a class="idref" href="lambda_calculus.html#old"><span class="id" type="definition">old</span></a> <span class="id" type="var">x</span> <span class="id" type="var">M</span> <span class="id" type="var">rho</span>)) <span class="id" type="keyword">as</span> <span class="id" type="var">z1</span>.<br/>
&nbsp;&nbsp;<span class="id" type="var">remember</span> (<a class="idref" href="fresh_variables.html#Nat.choice"><span class="id" type="definition">choice</span></a> (<a class="idref" href="lambda_calculus.html#old"><span class="id" type="definition">old</span></a> <span class="id" type="var">y</span> <span class="id" type="var">N</span> <span class="id" type="var">rho</span>)) <span class="id" type="keyword">as</span> <span class="id" type="var">z2</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<span class="id" type="var">z1</span> <a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <span class="id" type="var">z2</span>) <span class="id" type="keyword">as</span> <span class="id" type="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">subst</span> <span class="id" type="var">z1</span> <span class="id" type="var">z2</span>. <span class="id" type="tactic">rewrite</span> (@<a class="idref" href="lambda_calculus.html#L3_1_vii"><span class="id" type="lemma">L3_1_vii</span></a> <span class="id" type="var">M</span> <span class="id" type="var">N</span> <span class="id" type="var">x</span> <span class="id" type="var">y</span>); [<span class="id" type="tactic">reflexivity</span> | ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <span class="id" type="var">alpha_cond</span>; <span class="id" type="var">right</span>; <span class="id" type="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> &lt;- <span class="id" type="var">Heq</span>. <span class="id" type="tactic">f_equal</span>; <span class="id" type="tactic">rewrite</span> &lt;- (<a class="idref" href="lambda_calculus.html#C3_3"><span class="id" type="lemma">C3_3</span></a> <span class="id" type="var">M</span> <span class="id" type="var">_</span> <span class="id" type="var">x</span> <span class="id" type="var">y</span> <span class="id" type="var">rho</span>); <span class="id" type="tactic">auto</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab12"></a><h3 class="section">alpha-congruence is an equivalence relation.</h3>

</div>
<div class="code">

<br/>
</div>

<div class="doc">
Symmetry of alpha_equivalence 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Lemma</span> <a name="a_cong_sym"><span class="id" type="lemma">a_cong_sym</span></a> (<span class="id" type="var">M</span> <span class="id" type="var">N</span> : <a class="idref" href="lambda_calculus.html#term"><span class="id" type="inductive">term</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" type="var">M</span> <a class="idref" href="lambda_calculus.html#::x_'Eq'_x"><span class="id" type="notation">Eq</span></a> <span class="id" type="var">N</span> -&gt; <span class="id" type="var">N</span> <a class="idref" href="lambda_calculus.html#::x_'Eq'_x"><span class="id" type="notation">Eq</span></a> <span class="id" type="var">M</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">induction</span> 1; <span class="id" type="tactic">auto</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="var">Case</span> "al_lam_notin".<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="lambda_calculus.html#al_lam_notin"><span class="id" type="constructor">al_lam_notin</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="var">SCase</span> "binder case".<br/>
&nbsp;&nbsp;<span class="id" type="tactic">cut</span> (<span class="id" type="var">x</span> <a class="idref" href="lists_decidable.html#::x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="lambda_calculus.html#FV"><span class="id" type="definition">FV</span></a> (<span class="id" type="var">M</span> <a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><a class="idref" href="lambda_calculus.html#iota"><span class="id" type="abbreviation">iota</span></a> <a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">[[</span></a><a class="idref" href="lambda_calculus.html#Var"><span class="id" type="constructor">Var</span></a> <span class="id" type="var">y</span> <a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">=&gt;</span></a> <span class="id" type="var">x</span><a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">]]</span></a><a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a>));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[ <span class="id" type="tactic">rewrite</span> (<a class="idref" href="lambda_calculus.html#L3_1_iii"><span class="id" type="lemma">L3_1_iii</span></a> <span class="id" type="var">H0</span>); <span class="id" type="tactic">auto</span> | ].<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="lambda_calculus.html#fv_coll_subst"><span class="id" type="lemma">fv_coll_subst</span></a>. <span class="id" type="tactic">destruct</span> (<span class="id" type="var">x</span> <a class="idref" href="lists_decidable.html#DecidableIn.::x_'=='_x"><span class="id" type="notation">==</span></a> <span class="id" type="var">y</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="var">SSCase</span> "x = y"; <span class="id" type="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="lambda_calculus.html#iota_ext"><span class="id" type="lemma">iota_ext</span></a>; <span class="id" type="tactic">rewrite</span> &lt;- <a class="idref" href="lambda_calculus.html#fv_coll_iota"><span class="id" type="lemma">fv_coll_iota</span></a>; <span class="id" type="tactic">auto</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="var">SSCase</span> "x &lt;&gt; y".<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="lambda_calculus.html#fv_coll_notin_2"><span class="id" type="lemma">fv_coll_notin_2</span></a>; <span class="id" type="tactic">auto</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="var">SCase</span> "body hypothesis".<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> (<a class="idref" href="lambda_calculus.html#T3_5"><span class="id" type="lemma">T3_5</span></a> <span class="id" type="var">IHa_cong</span> (<a class="idref" href="lambda_calculus.html#iota"><span class="id" type="abbreviation">iota</span></a> <a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">[[</span></a><a class="idref" href="lambda_calculus.html#Var"><span class="id" type="constructor">Var</span></a> <span class="id" type="var">x</span> <a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">=&gt;</span></a> <span class="id" type="var">y</span><a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">]]</span></a>)).<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> (<a class="idref" href="lambda_calculus.html#C3_3"><span class="id" type="lemma">C3_3</span></a>); <span class="id" type="tactic">auto</span>. <span class="id" type="tactic">rewrite</span> <a class="idref" href="lambda_calculus.html#iota_ext"><span class="id" type="lemma">iota_ext</span></a>. <span class="id" type="tactic">apply</span> <a class="idref" href="lambda_calculus.html#L3_1_vi"><span class="id" type="lemma">L3_1_vi</span></a>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Short proof of Lemma 3.1.(vi) with the help of the symmetry of
    alpha congruence.  
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Remark</span> <a name="L3_1_vi'"><span class="id" type="lemma">L3_1_vi'</span></a> : <span class="id" type="keyword">forall</span> (<span class="id" type="var">M</span> : <a class="idref" href="lambda_calculus.html#term"><span class="id" type="inductive">term</span></a>), <span class="id" type="var">M</span> <a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><a class="idref" href="lambda_calculus.html#iota"><span class="id" type="abbreviation">iota</span></a><a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <a class="idref" href="lambda_calculus.html#::x_'Eq'_x"><span class="id" type="notation">Eq</span></a> <span class="id" type="var">M</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">induction</span> <span class="id" type="var">M</span> <span class="id" type="keyword">as</span> [ | | <span class="id" type="var">x</span> <span class="id" type="var">M'</span>]; <span class="id" type="tactic">simpl</span>; <span class="id" type="tactic">auto</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="var">Case</span> "M = Lam x M'".<br/>
&nbsp;&nbsp;<span class="id" type="var">remember</span> (<a class="idref" href="fresh_variables.html#Nat.choice"><span class="id" type="definition">choice</span></a> (<a class="idref" href="lambda_calculus.html#old"><span class="id" type="definition">old</span></a> <span class="id" type="var">x</span> <span class="id" type="var">M'</span> <a class="idref" href="lambda_calculus.html#iota"><span class="id" type="abbreviation">iota</span></a>)) <span class="id" type="keyword">as</span> <span class="id" type="var">y</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> (<span class="id" type="var">x</span> <a class="idref" href="lists_decidable.html#DecidableIn.::x_'=='_x"><span class="id" type="notation">==</span></a> <span class="id" type="var">y</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="var">SCase</span> "x = y".<br/>
&nbsp;&nbsp;<span class="id" type="tactic">subst</span> <span class="id" type="var">x</span>; <span class="id" type="tactic">apply</span> <a class="idref" href="lambda_calculus.html#al_lam_eq"><span class="id" type="constructor">al_lam_eq</span></a>; <span class="id" type="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> (@<a class="idref" href="lambda_calculus.html#L3_1_v"><span class="id" type="lemma">L3_1_v</span></a> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <a class="idref" href="lambda_calculus.html#iota"><span class="id" type="abbreviation">iota</span></a>); <span class="id" type="tactic">auto</span> <span class="id" type="keyword">using</span> <a class="idref" href="lambda_calculus.html#f_ext_iota"><span class="id" type="lemma">f_ext_iota</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="var">SCase</span> "x &lt;&gt; y".<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="lambda_calculus.html#a_cong_sym"><span class="id" type="lemma">a_cong_sym</span></a>. <span class="id" type="tactic">apply</span> <a class="idref" href="lambda_calculus.html#L3_1_i"><span class="id" type="lemma">L3_1_i</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">subst</span> <span class="id" type="var">y</span>; <span class="id" type="tactic">eauto</span> <span class="id" type="keyword">using</span> <a class="idref" href="lambda_calculus.html#Nat_dec.notin_rm_2"><span class="id" type="lemma">notin_rm_2</span></a>, <a class="idref" href="lambda_calculus.html#fresh_iota"><span class="id" type="lemma">fresh_iota</span></a>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Transitivity of alpha_equivalence:
<ul>
<li> We prove first the transitivity w.r.t. identity substitution. 
</li>
</ul>

</div>
<div class="code">

<br/>
<span class="id" type="keyword">Lemma</span> <a name="a_cong_trans_iota"><span class="id" type="lemma">a_cong_trans_iota</span></a> : <span class="id" type="keyword">forall</span> (<span class="id" type="var">M</span> <span class="id" type="var">N</span> : <a class="idref" href="lambda_calculus.html#term"><span class="id" type="inductive">term</span></a>),<br/>
&nbsp;&nbsp;<span class="id" type="var">M</span> <a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><a class="idref" href="lambda_calculus.html#iota"><span class="id" type="abbreviation">iota</span></a><a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <a class="idref" href="lambda_calculus.html#::x_'Eq'_x"><span class="id" type="notation">Eq</span></a> <span class="id" type="var">N</span> -&gt; <span class="id" type="var">M</span> <a class="idref" href="lambda_calculus.html#::x_'Eq'_x"><span class="id" type="notation">Eq</span></a> <span class="id" type="var">N</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">induction</span> <span class="id" type="var">M</span> <span class="id" type="keyword">as</span> [ | | <span class="id" type="var">x</span> <span class="id" type="var">M</span>]; <span class="id" type="tactic">simpl</span>; <span class="id" type="tactic">intros</span> <span class="id" type="var">N</span> <span class="id" type="var">HEq</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">inversion</span> <span class="id" type="var">HEq</span>; <span class="id" type="tactic">clear</span> <span class="id" type="var">HEq</span>; <span class="id" type="tactic">subst</span>; <span class="id" type="tactic">auto</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="var">Case</span> "M = Lam x M using a_cong_eq".<br/>
&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> (<span class="id" type="var">x</span> <a class="idref" href="lists_decidable.html#DecidableIn.::x_'=='_x"><span class="id" type="notation">==</span></a> <a class="idref" href="fresh_variables.html#Nat.choice"><span class="id" type="definition">choice</span></a> (<a class="idref" href="lambda_calculus.html#old"><span class="id" type="definition">old</span></a> <span class="id" type="var">x</span> <span class="id" type="var">M</span> <a class="idref" href="lambda_calculus.html#iota"><span class="id" type="abbreviation">iota</span></a>)) <span class="id" type="keyword">as</span> [<span class="id" type="var">Hxfresh</span> | ].<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="var">SCase</span> "x = fresh x M iota".<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> &lt;- <span class="id" type="var">Hxfresh</span> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="lambda_calculus.html#al_lam_eq"><span class="id" type="constructor">al_lam_eq</span></a>; <span class="id" type="tactic">auto</span>. <span class="id" type="tactic">apply</span> <span class="id" type="var">IHM</span>. <span class="id" type="tactic">rewrite</span> <a class="idref" href="lambda_calculus.html#iota_ext"><span class="id" type="lemma">iota_ext</span></a> <span class="id" type="keyword">in</span> *; <span class="id" type="tactic">auto</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="var">SCase</span> "x &lt;&gt; fresh x M iota".<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="lambda_calculus.html#al_lam_notin"><span class="id" type="constructor">al_lam_notin</span></a>; <span class="id" type="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="lambda_calculus.html#Nat_dec.notin_rm_2"><span class="id" type="lemma">notin_rm_2</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">b</span> := <span class="id" type="var">x</span>); <span class="id" type="tactic">auto</span> <span class="id" type="keyword">using</span> <a class="idref" href="lambda_calculus.html#fresh_iota"><span class="id" type="lemma">fresh_iota</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="var">Case</span> "M = Lam x M using al_lam_notin".<br/>
&nbsp;&nbsp;<span class="id" type="var">remember</span> (<a class="idref" href="fresh_variables.html#Nat.choice"><span class="id" type="definition">choice</span></a> (<a class="idref" href="lambda_calculus.html#old"><span class="id" type="definition">old</span></a> <span class="id" type="var">x</span> <span class="id" type="var">M</span> <a class="idref" href="lambda_calculus.html#iota"><span class="id" type="abbreviation">iota</span></a>)) <span class="id" type="keyword">as</span> <span class="id" type="var">z</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> (<span class="id" type="var">x</span> <a class="idref" href="lists_decidable.html#DecidableIn.::x_'=='_x"><span class="id" type="notation">==</span></a> <span class="id" type="var">z</span>) <span class="id" type="keyword">as</span> [<span class="id" type="var">Hxfresh</span> | ].<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="var">SCase</span> "x = z".<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="lambda_calculus.html#fv_coll_subst"><span class="id" type="lemma">fv_coll_subst</span></a> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">subst</span> <span class="id" type="var">x</span>. <span class="id" type="tactic">apply</span> <a class="idref" href="lambda_calculus.html#al_lam_notin"><span class="id" type="constructor">al_lam_notin</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="var">SSCase</span> "binder case".<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="lambda_calculus.html#iota_ext"><span class="id" type="lemma">iota_ext</span></a> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> &lt;- <a class="idref" href="lambda_calculus.html#fv_coll_iota"><span class="id" type="lemma">fv_coll_iota</span></a> <span class="id" type="keyword">in</span> *; <span class="id" type="tactic">auto</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="var">SSCase</span> "body case".<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="lambda_calculus.html#C3_3'"><span class="id" type="lemma">C3_3'</span></a> <span class="id" type="keyword">in</span> *; <span class="id" type="tactic">auto</span>; <span class="id" type="tactic">apply</span> <a class="idref" href="lambda_calculus.html#Nat_dec.notin_rm_1"><span class="id" type="lemma">notin_rm_1</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="var">SCase</span> "x &lt;&gt; z".<br/>
&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> (<span class="id" type="var">x</span> <a class="idref" href="lists_decidable.html#DecidableIn.::x_'=='_x"><span class="id" type="notation">==</span></a> <span class="id" type="var">y</span>) <span class="id" type="keyword">as</span> [<span class="id" type="var">Hxy</span> | ].<br/>
&nbsp;&nbsp;<span class="id" type="var">SSCase</span> "x == y".<br/>
&nbsp;&nbsp;<span class="id" type="tactic">subst</span> <span class="id" type="var">y</span>. <span class="id" type="tactic">apply</span> <a class="idref" href="lambda_calculus.html#al_lam_eq"><span class="id" type="constructor">al_lam_eq</span></a>; <span class="id" type="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">IHM</span>. <span class="id" type="tactic">rewrite</span> <a class="idref" href="lambda_calculus.html#C3_3'"><span class="id" type="lemma">C3_3'</span></a> <span class="id" type="keyword">in</span> *.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="var">SSSCase</span> "condition 1".<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="lambda_calculus.html#iota_ext"><span class="id" type="lemma">iota_ext</span></a> <span class="id" type="keyword">in</span> *; <span class="id" type="tactic">auto</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="var">SSSCase</span> "condition 2".<br/>
&nbsp;&nbsp;<span class="id" type="tactic">subst</span> <span class="id" type="var">z</span>; <span class="id" type="tactic">apply</span> <a class="idref" href="lambda_calculus.html#fresh_iota"><span class="id" type="lemma">fresh_iota</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="var">SSCase</span> "x &lt;&gt; y".<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="lambda_calculus.html#al_lam_notin"><span class="id" type="constructor">al_lam_notin</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="var">SSSCase</span> "binder case".<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="lambda_calculus.html#fv_coll_subst"><span class="id" type="lemma">fv_coll_subst</span></a> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> (@<a class="idref" href="lambda_calculus.html#fv_coll_iota_up"><span class="id" type="lemma">fv_coll_iota_up</span></a> <span class="id" type="var">_</span> <span class="id" type="var">x</span> <span class="id" type="var">y</span> <span class="id" type="var">z</span>); <span class="id" type="tactic">auto</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="var">SSSCase</span> "body case".<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="lambda_calculus.html#C3_3'"><span class="id" type="lemma">C3_3'</span></a> <span class="id" type="keyword">in</span> *; <span class="id" type="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">subst</span> <span class="id" type="var">z</span>; <span class="id" type="tactic">apply</span> <a class="idref" href="lambda_calculus.html#fresh_iota"><span class="id" type="lemma">fresh_iota</span></a>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="a_cong_trans"><span class="id" type="lemma">a_cong_trans</span></a> : <span class="id" type="keyword">forall</span> (<span class="id" type="var">M</span> <span class="id" type="var">N</span> <span class="id" type="var">P</span> : <a class="idref" href="lambda_calculus.html#term"><span class="id" type="inductive">term</span></a>),<br/>
&nbsp;&nbsp;<span class="id" type="var">M</span> <a class="idref" href="lambda_calculus.html#::x_'Eq'_x"><span class="id" type="notation">Eq</span></a> <span class="id" type="var">N</span> -&gt; <br/>
&nbsp;&nbsp;<span class="id" type="var">N</span> <a class="idref" href="lambda_calculus.html#::x_'Eq'_x"><span class="id" type="notation">Eq</span></a> <span class="id" type="var">P</span> -&gt; <br/>
&nbsp;&nbsp;<span class="id" type="var">M</span> <a class="idref" href="lambda_calculus.html#::x_'Eq'_x"><span class="id" type="notation">Eq</span></a> <span class="id" type="var">P</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">M</span> <span class="id" type="var">N</span> <span class="id" type="var">P</span> <span class="id" type="var">EqMN</span>; <span class="id" type="tactic">generalize</span> <span class="id" type="tactic">dependent</span> <span class="id" type="var">P</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">induction</span> <span class="id" type="var">EqMN</span>; <span class="id" type="tactic">inversion</span> 1; <span class="id" type="tactic">auto</span>; <span class="id" type="tactic">subst</span> <span class="id" type="var">P</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="var">Case</span> "al_lam_eq &amp; al_lam_eq".<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="lambda_calculus.html#al_lam_eq"><span class="id" type="constructor">al_lam_eq</span></a>; <span class="id" type="tactic">auto</span>; <span class="id" type="tactic">congruence</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="var">Case</span> "al_lam_eq &amp; al_lam_notin".<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="lambda_calculus.html#al_lam_notin"><span class="id" type="constructor">al_lam_notin</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="var">SCase</span> "variable condition".<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> (<a class="idref" href="lambda_calculus.html#L3_1_iii"><span class="id" type="lemma">L3_1_iii</span></a> <span class="id" type="var">EqMN</span>); <span class="id" type="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" type="var">SCase</span> "body condition".<br/>
&nbsp;&nbsp;<span class="id" type="tactic">subst</span> <span class="id" type="var">x</span>. <span class="id" type="tactic">rewrite</span> (<a class="idref" href="lambda_calculus.html#T3_5"><span class="id" type="lemma">T3_5</span></a> <span class="id" type="var">EqMN</span>); <span class="id" type="tactic">auto</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="var">Case</span> "al_lam_notin &amp; al_lam_eq".<br/>
&nbsp;&nbsp;<span class="id" type="tactic">subst</span> <span class="id" type="var">y0</span>. <span class="id" type="tactic">apply</span> <a class="idref" href="lambda_calculus.html#al_lam_notin"><span class="id" type="constructor">al_lam_notin</span></a>; <span class="id" type="tactic">auto</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="var">Case</span> "al_lam_notin and al_lam_notin".<br/>
&nbsp;&nbsp;<span class="id" type="tactic">subst</span>. <span class="id" type="tactic">destruct</span> (<span class="id" type="var">x</span> <a class="idref" href="lists_decidable.html#DecidableIn.::x_'=='_x"><span class="id" type="notation">==</span></a> <span class="id" type="var">y0</span>); [<span class="id" type="tactic">subst</span> <span class="id" type="var">y0</span> | <span class="id" type="var">idtac</span>].<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="var">SCase</span> "x = y0".<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="lambda_calculus.html#al_lam_eq"><span class="id" type="constructor">al_lam_eq</span></a>; <span class="id" type="tactic">auto</span>. <span class="id" type="tactic">apply</span> <a class="idref" href="lambda_calculus.html#a_cong_trans_iota"><span class="id" type="lemma">a_cong_trans_iota</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> (@<a class="idref" href="lambda_calculus.html#L3_1_v"><span class="id" type="lemma">L3_1_v</span></a> <span class="id" type="var">_</span> <a class="idref" href="lambda_calculus.html#iota"><span class="id" type="abbreviation">iota</span></a> (<a class="idref" href="lambda_calculus.html#iota"><span class="id" type="abbreviation">iota</span></a> <a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">[[</span></a><a class="idref" href="lambda_calculus.html#Var"><span class="id" type="constructor">Var</span></a> <span class="id" type="var">x</span> <a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">=&gt;</span></a> <span class="id" type="var">x</span><a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">]]</span></a>)).<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> &lt;- (<a class="idref" href="lambda_calculus.html#C3_3"><span class="id" type="lemma">C3_3</span></a> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">y</span>); <span class="id" type="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> (<a class="idref" href="lambda_calculus.html#T3_5"><span class="id" type="lemma">T3_5</span></a> <span class="id" type="var">EqMN</span>); <span class="id" type="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="lambda_calculus.html#iota_ext"><span class="id" type="lemma">iota_ext</span></a>. <span class="id" type="tactic">unfold</span> <span class="id" type="var">f_ext</span>; <span class="id" type="tactic">firstorder</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="var">SCase</span> "x &lt;&gt; y0".<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="lambda_calculus.html#al_lam_notin"><span class="id" type="constructor">al_lam_notin</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> &lt;- (<a class="idref" href="lambda_calculus.html#L3_1_iii"><span class="id" type="lemma">L3_1_iii</span></a> <span class="id" type="var">EqMN</span>) <span class="id" type="keyword">in</span> *. <span class="id" type="tactic">rewrite</span> <a class="idref" href="lambda_calculus.html#fv_coll_subst"><span class="id" type="lemma">fv_coll_subst</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H3</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> (@<a class="idref" href="lambda_calculus.html#fv_coll_iota_up"><span class="id" type="lemma">fv_coll_iota_up</span></a> <span class="id" type="var">_</span> <span class="id" type="var">x</span> <span class="id" type="var">y0</span> <span class="id" type="var">y</span>); <span class="id" type="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> &lt;- (<a class="idref" href="lambda_calculus.html#C3_3"><span class="id" type="lemma">C3_3</span></a> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">x</span> <span class="id" type="var">y</span>); <span class="id" type="tactic">auto</span>. <span class="id" type="tactic">rewrite</span> (<a class="idref" href="lambda_calculus.html#T3_5"><span class="id" type="lemma">T3_5</span></a> <span class="id" type="var">EqMN</span>); <span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
alpha-congruence terms normalize by the identity substitution. 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Corollary</span> <a name="C3_6_i"><span class="id" type="lemma">C3_6_i</span></a> : <span class="id" type="keyword">forall</span> (<span class="id" type="var">M</span> <span class="id" type="var">N</span> : <a class="idref" href="lambda_calculus.html#term"><span class="id" type="inductive">term</span></a>),<br/>
&nbsp;&nbsp;<span class="id" type="var">M</span> <a class="idref" href="lambda_calculus.html#::x_'Eq'_x"><span class="id" type="notation">Eq</span></a> <span class="id" type="var">N</span> <a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Init.Logic.html#:type_scope:x_'<->'_x"><span class="id" type="notation">&lt;-&gt;</span></a> <span class="id" type="var">M</span> <a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><a class="idref" href="lambda_calculus.html#iota"><span class="id" type="abbreviation">iota</span></a><a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <span class="id" type="var">N</span> <a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><a class="idref" href="lambda_calculus.html#iota"><span class="id" type="abbreviation">iota</span></a><a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">split</span>; <span class="id" type="tactic">intros</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="var">Case</span> "-&gt;".<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="lambda_calculus.html#T3_5"><span class="id" type="lemma">T3_5</span></a>; <span class="id" type="tactic">auto</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="var">Case</span> "&lt;-".<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span>; <span class="id" type="tactic">apply</span> <a class="idref" href="lambda_calculus.html#a_cong_trans"><span class="id" type="lemma">a_cong_trans</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">N</span> := <span class="id" type="var">M</span> <a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><a class="idref" href="lambda_calculus.html#iota"><span class="id" type="abbreviation">iota</span></a><a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="var">SCase</span> "M Eq M {{iota}}".<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="lambda_calculus.html#a_cong_sym"><span class="id" type="lemma">a_cong_sym</span></a>; <span class="id" type="tactic">apply</span> <a class="idref" href="lambda_calculus.html#L3_1_vi"><span class="id" type="lemma">L3_1_vi</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="var">SCase</span> "M {{iota}} Eq N".<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H</span>; <span class="id" type="tactic">apply</span> <a class="idref" href="lambda_calculus.html#L3_1_vi"><span class="id" type="lemma">L3_1_vi</span></a>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Corollary</span> <a name="C3_6_ii"><span class="id" type="lemma">C3_6_ii</span></a> : <span class="id" type="keyword">forall</span> (<span class="id" type="var">rho</span> <span class="id" type="var">eta</span> : <a class="idref" href="lambda_calculus.html#substitution"><span class="id" type="definition">substitution</span></a>)(<span class="id" type="var">L</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Init.Datatypes.html#list"><span class="id" type="inductive">list</span></a> <a class="idref" href="lambda_calculus.html#var"><span class="id" type="abbreviation">var</span></a>),<br/>
&nbsp;&nbsp;<a class="idref" href="lambda_calculus.html#subst_cong"><span class="id" type="definition">subst_cong</span></a> <span class="id" type="var">rho</span> <span class="id" type="var">eta</span> <span class="id" type="var">L</span> <a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Init.Logic.html#:type_scope:x_'<->'_x"><span class="id" type="notation">&lt;-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="lambda_calculus.html#Nat_dec.f_ext"><span class="id" type="definition">f_ext</span></a> (<a class="idref" href="lambda_calculus.html#comp"><span class="id" type="definition">comp</span></a> <a class="idref" href="lambda_calculus.html#iota"><span class="id" type="abbreviation">iota</span></a> <span class="id" type="var">rho</span>) (<a class="idref" href="lambda_calculus.html#comp"><span class="id" type="definition">comp</span></a> <a class="idref" href="lambda_calculus.html#iota"><span class="id" type="abbreviation">iota</span></a> <span class="id" type="var">eta</span>) <span class="id" type="var">L</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <span class="id" type="var">subst_cong</span>, <span class="id" type="var">f_ext</span>, <span class="id" type="var">comp</span>; <span class="id" type="tactic">split</span>; <span class="id" type="tactic">intros</span>; <span class="id" type="tactic">apply</span> <a class="idref" href="lambda_calculus.html#C3_6_i"><span class="id" type="lemma">C3_6_i</span></a>; <span class="id" type="tactic">auto</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
The following corollary is already proved during the proof
   of <span class="inlinecode"><span class="id" type="var">a_cong_symmetry</span></span>. 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Corollary</span> <a name="C3_7"><span class="id" type="lemma">C3_7</span></a> : <span class="id" type="keyword">forall</span> (<span class="id" type="var">M</span> <span class="id" type="var">N</span> : <a class="idref" href="lambda_calculus.html#term"><span class="id" type="inductive">term</span></a>)(<span class="id" type="var">x</span> <span class="id" type="var">y</span> : <a class="idref" href="lambda_calculus.html#var"><span class="id" type="abbreviation">var</span></a>),<br/>
&nbsp;&nbsp;<a class="idref" href="lambda_calculus.html#alpha_cond"><span class="id" type="definition">alpha_cond</span></a> <span class="id" type="var">M</span> <span class="id" type="var">x</span> <span class="id" type="var">N</span> <span class="id" type="var">y</span> -&gt; <a class="idref" href="lambda_calculus.html#alpha_cond"><span class="id" type="definition">alpha_cond</span></a> <span class="id" type="var">N</span> <span class="id" type="var">y</span> <span class="id" type="var">M</span> <span class="id" type="var">x</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <span class="id" type="var">alpha_cond</span>; <span class="id" type="tactic">intros</span> <span class="id" type="var">M</span> <span class="id" type="var">N</span> <span class="id" type="var">x</span> <span class="id" type="var">y</span> <span class="id" type="var">Hcond</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">Hcond</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">H</span> | <span class="id" type="var">H</span>].<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="var">Case</span> "x = y /\ M Eq N".<br/>
&nbsp;&nbsp;<span class="id" type="var">left</span>; <span class="id" type="tactic">split</span>; <span class="id" type="tactic">firstorder</span> <span class="id" type="keyword">using</span> <span class="id" type="var">a_cong_sym</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="var">Case</span> "y # FV M /\ M {{iota [[Var y =&gt; x]]}} Eq N".<br/>
&nbsp;&nbsp;<span class="id" type="var">right</span>; <span class="id" type="tactic">destruct</span> <span class="id" type="var">H</span>; <span class="id" type="tactic">split</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="var">SCase</span> "binder case".<br/>
&nbsp;&nbsp;<span class="id" type="tactic">cut</span> (<span class="id" type="var">x</span> <a class="idref" href="lists_decidable.html#::x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="lambda_calculus.html#FV"><span class="id" type="definition">FV</span></a> (<span class="id" type="var">M</span> <a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><a class="idref" href="lambda_calculus.html#iota"><span class="id" type="abbreviation">iota</span></a> <a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">[[</span></a><a class="idref" href="lambda_calculus.html#Var"><span class="id" type="constructor">Var</span></a> <span class="id" type="var">y</span> <a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">=&gt;</span></a> <span class="id" type="var">x</span><a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">]]</span></a><a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a>)).<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> (<a class="idref" href="lambda_calculus.html#L3_1_iii"><span class="id" type="lemma">L3_1_iii</span></a> <span class="id" type="var">H0</span>); <span class="id" type="tactic">auto</span>. <span class="id" type="tactic">rewrite</span> <a class="idref" href="lambda_calculus.html#fv_coll_subst"><span class="id" type="lemma">fv_coll_subst</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> (<span class="id" type="var">x</span> <a class="idref" href="lists_decidable.html#DecidableIn.::x_'=='_x"><span class="id" type="notation">==</span></a> <span class="id" type="var">y</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="var">SSCase</span> "x = y"; <span class="id" type="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="lambda_calculus.html#iota_ext"><span class="id" type="lemma">iota_ext</span></a>. <span class="id" type="tactic">rewrite</span> &lt;- <a class="idref" href="lambda_calculus.html#fv_coll_iota"><span class="id" type="lemma">fv_coll_iota</span></a>; <span class="id" type="tactic">auto</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="var">SSCase</span> "x &lt;&gt; y".<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="lambda_calculus.html#fv_coll_notin_2"><span class="id" type="lemma">fv_coll_notin_2</span></a>; <span class="id" type="tactic">auto</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="var">SCase</span> "body case".<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> &lt;- (<a class="idref" href="lambda_calculus.html#T3_5"><span class="id" type="lemma">T3_5</span></a> <span class="id" type="var">H0</span> (<a class="idref" href="lambda_calculus.html#iota"><span class="id" type="abbreviation">iota</span></a> <a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">[[</span></a><a class="idref" href="lambda_calculus.html#Var"><span class="id" type="constructor">Var</span></a> <span class="id" type="var">x</span> <a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">=&gt;</span></a> <span class="id" type="var">y</span><a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">]]</span></a>)).<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> (<a class="idref" href="lambda_calculus.html#C3_3"><span class="id" type="lemma">C3_3</span></a>); <span class="id" type="tactic">auto</span>. <span class="id" type="tactic">rewrite</span> <a class="idref" href="lambda_calculus.html#iota_ext"><span class="id" type="lemma">iota_ext</span></a>. <span class="id" type="tactic">apply</span> <a class="idref" href="lambda_calculus.html#L3_1_vi"><span class="id" type="lemma">L3_1_vi</span></a>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Substitution and alpha-congruence are compatible. 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Corollary</span> <a name="C3_8"><span class="id" type="lemma">C3_8</span></a> : <span class="id" type="keyword">forall</span> (<span class="id" type="var">M</span> <span class="id" type="var">N</span> : <a class="idref" href="lambda_calculus.html#term"><span class="id" type="inductive">term</span></a>)(<span class="id" type="var">rho</span> <span class="id" type="var">eta</span> : <a class="idref" href="lambda_calculus.html#substitution"><span class="id" type="definition">substitution</span></a>),<br/>
&nbsp;&nbsp;<span class="id" type="var">M</span> <a class="idref" href="lambda_calculus.html#::x_'Eq'_x"><span class="id" type="notation">Eq</span></a> <span class="id" type="var">N</span> -&gt; <br/>
&nbsp;&nbsp;<a class="idref" href="lambda_calculus.html#subst_cong"><span class="id" type="definition">subst_cong</span></a> <span class="id" type="var">rho</span> <span class="id" type="var">eta</span> (<a class="idref" href="lambda_calculus.html#FV"><span class="id" type="definition">FV</span></a> <span class="id" type="var">M</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id" type="var">M</span> <a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><span class="id" type="var">rho</span><a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <a class="idref" href="lambda_calculus.html#::x_'Eq'_x"><span class="id" type="notation">Eq</span></a> <span class="id" type="var">N</span> <a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><span class="id" type="var">eta</span><a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span>; <span class="id" type="tactic">apply</span> <a class="idref" href="lambda_calculus.html#a_cong_trans"><span class="id" type="lemma">a_cong_trans</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">N</span>:= <a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">(</span></a><span class="id" type="var">M</span> <a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><span class="id" type="var">rho</span><a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">}})</span></a> <a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><a class="idref" href="lambda_calculus.html#iota"><span class="id" type="abbreviation">iota</span></a><a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="var">Case</span> "M {{rho}} Eq (M {{rho}}) {{iota}}".<br/>
&nbsp;&nbsp;<span class="id" type="tactic">auto</span> <span class="id" type="keyword">using</span> <a class="idref" href="lambda_calculus.html#a_cong_sym"><span class="id" type="lemma">a_cong_sym</span></a>, <a class="idref" href="lambda_calculus.html#L3_1_vi"><span class="id" type="lemma">L3_1_vi</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="var">Case</span> "(M {{rho}}) {{iota}} Eq N {{eta}}".<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="lambda_calculus.html#T3_2"><span class="id" type="lemma">T3_2</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="lambda_calculus.html#L3_1_v"><span class="id" type="lemma">L3_1_v</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">eta</span> := <a class="idref" href="lambda_calculus.html#comp"><span class="id" type="definition">comp</span></a> <a class="idref" href="lambda_calculus.html#iota"><span class="id" type="abbreviation">iota</span></a> <span class="id" type="var">eta</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[ | <span class="id" type="tactic">apply</span> <a class="idref" href="lambda_calculus.html#C3_6_ii"><span class="id" type="lemma">C3_6_ii</span></a>]; <span class="id" type="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="lambda_calculus.html#T3_5"><span class="id" type="lemma">T3_5</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">N</span> := <span class="id" type="var">N</span>); <span class="id" type="tactic">auto</span>. <span class="id" type="tactic">rewrite</span> &lt;- <a class="idref" href="lambda_calculus.html#T3_2"><span class="id" type="lemma">T3_2</span></a>. <span class="id" type="tactic">apply</span> <a class="idref" href="lambda_calculus.html#L3_1_vi"><span class="id" type="lemma">L3_1_vi</span></a>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Corollary</span> <a name="C3_9"><span class="id" type="lemma">C3_9</span></a> : <span class="id" type="keyword">forall</span> (<span class="id" type="var">M</span> <span class="id" type="var">N</span> : <a class="idref" href="lambda_calculus.html#term"><span class="id" type="inductive">term</span></a>)(<span class="id" type="var">x</span> <span class="id" type="var">y</span> : <a class="idref" href="lambda_calculus.html#var"><span class="id" type="abbreviation">var</span></a>)(<span class="id" type="var">rho</span> : <a class="idref" href="lambda_calculus.html#substitution"><span class="id" type="definition">substitution</span></a>),<br/>
&nbsp;&nbsp;<span class="id" type="var">y</span> <a class="idref" href="lists_decidable.html#::x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="lambda_calculus.html#old"><span class="id" type="definition">old</span></a> <span class="id" type="var">x</span> <span class="id" type="var">M</span> <span class="id" type="var">rho</span> -&gt;<br/>
&nbsp;&nbsp;<a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">(</span></a><span class="id" type="var">M</span> <a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><span class="id" type="var">rho</span> <a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">[[</span></a><a class="idref" href="lambda_calculus.html#Var"><span class="id" type="constructor">Var</span></a> <span class="id" type="var">y</span> <a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">=&gt;</span></a> <span class="id" type="var">x</span><a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">]]</span></a><a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">}})</span></a> <a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><a class="idref" href="lambda_calculus.html#iota"><span class="id" type="abbreviation">iota</span></a> <a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">[[</span></a><span class="id" type="var">N</span> <a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">=&gt;</span></a> <span class="id" type="var">y</span><a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">]]</span></a><a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <a class="idref" href="lambda_calculus.html#::x_'Eq'_x"><span class="id" type="notation">Eq</span></a> <span class="id" type="var">M</span> <a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><span class="id" type="var">rho</span> <a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">[[</span></a><span class="id" type="var">N</span> <a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">=&gt;</span></a> <span class="id" type="var">x</span><a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">]]</span></a><a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">M</span> <span class="id" type="var">N</span> <span class="id" type="var">x</span> <span class="id" type="var">y</span> <span class="id" type="var">rho</span> <span class="id" type="var">Hnotin</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="lambda_calculus.html#T3_2"><span class="id" type="lemma">T3_2</span></a>. <span class="id" type="tactic">apply</span> <a class="idref" href="lambda_calculus.html#C3_8"><span class="id" type="lemma">C3_8</span></a>; <span class="id" type="tactic">auto</span> <span class="id" type="keyword">using</span> <a class="idref" href="lambda_calculus.html#a_cong_refl"><span class="id" type="lemma">a_cong_refl</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <span class="id" type="var">subst_cong</span>, <span class="id" type="var">comp</span>; <span class="id" type="tactic">intros</span> <span class="id" type="var">x0</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> (<span class="id" type="var">x</span> <a class="idref" href="lists_decidable.html#DecidableIn.::x_'=='_x"><span class="id" type="notation">==</span></a> <span class="id" type="var">x0</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="var">Case</span> "x = x0".<br/>
&nbsp;&nbsp;<span class="id" type="tactic">subst</span>; <span class="id" type="tactic">repeat</span> (<span class="id" type="var">rewrite_up</span>; <span class="id" type="tactic">simpl</span>); <span class="id" type="tactic">apply</span> <a class="idref" href="lambda_calculus.html#a_cong_refl"><span class="id" type="lemma">a_cong_refl</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="var">Case</span> "x &lt;&gt; x0".<br/>
&nbsp;&nbsp;<span class="id" type="tactic">repeat</span> (<span class="id" type="var">rewrite_up</span>; <span class="id" type="tactic">simpl</span>).<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> (@<a class="idref" href="lambda_calculus.html#L3_1_v"><span class="id" type="lemma">L3_1_v</span></a> (<span class="id" type="var">rho</span> <span class="id" type="var">x0</span>) <span class="id" type="var">_</span> <a class="idref" href="lambda_calculus.html#iota"><span class="id" type="abbreviation">iota</span></a>); <span class="id" type="tactic">auto</span> <span class="id" type="keyword">using</span> <a class="idref" href="lambda_calculus.html#L3_1_vi"><span class="id" type="lemma">L3_1_vi</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <span class="id" type="var">f_ext</span>; <span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">cut</span> (<span class="id" type="var">y</span> <a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Init.Logic.html#:type_scope:x_'<>'_x"><span class="id" type="notation">&lt;&gt;</span></a> <span class="id" type="var">x1</span>); <span class="id" type="tactic">intro</span> <span class="id" type="var">Hneq</span>; <span class="id" type="tactic">auto</span> <span class="id" type="keyword">using</span> <a class="idref" href="lambda_calculus.html#Nat_dec.up_old"><span class="id" type="lemma">up_old</span></a>; <span class="id" type="tactic">try</span> <span class="id" type="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">subst</span>; <span class="id" type="tactic">elim</span> <span class="id" type="var">Hnotin</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="lambda_calculus.html#L3_1_ii'"><span class="id" type="lemma">L3_1_ii'</span></a>; <span class="id" type="var">exists</span> <span class="id" type="var">x0</span>; <span class="id" type="tactic">firstorder</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Lemma 3.10 is trivial in our case because it is the definition
   itself:
   <br/>
<span class="inlinecode">&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">Corollary</span> 3.10. <span class="id" type="var">If</span> <span class="id" type="var">M</span> <span class="id" type="var">Eq</span> <span class="id" type="var">N</span>, <span class="id" type="keyword">then</span> <span class="id" type="var">one</span> <span class="id" type="var">of</span> <span class="id" type="var">the</span> <span class="id" type="var">following</span> <span class="id" type="var">conditions</span> <span class="id" type="var">hold</span>:<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" type="var">i</span>) <span class="id" type="var">M</span> <span class="id" type="var">and</span> <span class="id" type="var">N</span> <span class="id" type="var">are</span> <span class="id" type="var">equal</span> <span class="id" type="var">variables</span>;<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" type="var">ii</span>) <span class="id" type="var">M</span> <span class="id" type="var">and</span> <span class="id" type="var">N</span> <span class="id" type="var">are</span> <span class="id" type="var">applications</span> <span class="id" type="var">M1</span> <span class="id" type="var">M2</span> <span class="id" type="var">and</span> <span class="id" type="var">N1</span> <span class="id" type="var">N2</span> <span class="id" type="var">respectively</span>, <span class="id" type="var">and</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">Mi</span> <span class="id" type="var">Eq</span> <span class="id" type="var">Ni</span>, <span class="id" type="keyword">for</span> <span class="id" type="var">i</span> = 1, 2.<br/>
<br/>
&nbsp;&nbsp;&nbsp;(<span class="id" type="var">iii</span>) <span class="id" type="var">M</span> <span class="id" type="var">and</span> <span class="id" type="var">N</span> <span class="id" type="var">are</span> <span class="id" type="var">abstractions</span> <span class="id" type="var">Lam</span> <span class="id" type="var">x</span> <span class="id" type="var">M'</span> <span class="id" type="var">and</span> <span class="id" type="var">Lam</span> <span class="id" type="var">y</span> <span class="id" type="var">N'</span> <span class="id" type="var">respectively</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">and</span> <span class="id" type="var">M'</span>(<span class="id" type="var">x</span>) <span class="id" type="var">Eq</span> <span class="id" type="var">N'</span>(<span class="id" type="var">y</span>).<br/>
&nbsp;&nbsp;&nbsp;
<br/> <br/>
</span>   
</div>
<div class="code">

<br/>
</div>

<div class="doc">
Up to alpha-congruence, any element not from <span class="inlinecode"><span class="id" type="var">old</span> <span class="id" type="var">x</span> <span class="id" type="var">M</span> <span class="id" type="var">rho</span></span>
   may be chosen as the bound variable of <span class="inlinecode">(<span class="id" type="var">Lam</span> <span class="id" type="var">x</span> <span class="id" type="var">M</span>) <span class="id" type="var">rho</span></span>.

<br/> <br/>
   In particular, we have
   <br/>
<span class="inlinecode">&nbsp;&nbsp;&nbsp;<span class="id" type="var">Lam</span> <span class="id" type="var">x</span> <span class="id" type="var">M</span> <span class="id" type="var">Eq</span> (<span class="id" type="var">Lam</span> <span class="id" type="var">x</span> <span class="id" type="var">M</span>) <span class="id" type="var">iota</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">Eq</span> <span class="id" type="var">Lam</span> <span class="id" type="var">y</span> (<span class="id" type="var">M</span> {{<span class="id" type="var">iota</span> [[<span class="id" type="var">Var</span> <span class="id" type="var">y</span> =&gt; <span class="id" type="var">x</span>]]}})
<br/> <br/>
</span>   for all <span class="inlinecode"><span class="id" type="var">y</span></span> not from <span class="inlinecode"><span class="id" type="var">old</span> <span class="id" type="var">x</span> <span class="id" type="var">M</span> <span class="id" type="var">rho</span></span>. 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Lemma</span> <a name="fv_coll_neq"><span class="id" type="lemma">fv_coll_neq</span></a> : <span class="id" type="keyword">forall</span> (<span class="id" type="var">L</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Init.Datatypes.html#list"><span class="id" type="inductive">list</span></a> <a class="idref" href="lambda_calculus.html#var"><span class="id" type="abbreviation">var</span></a>)(<span class="id" type="var">x</span> <span class="id" type="var">y</span> : <a class="idref" href="lambda_calculus.html#var"><span class="id" type="abbreviation">var</span></a>)(<span class="id" type="var">rho</span> : <a class="idref" href="lambda_calculus.html#substitution"><span class="id" type="definition">substitution</span></a>),<br/>
&nbsp;&nbsp;<span class="id" type="var">y</span> <a class="idref" href="lists_decidable.html#::x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="lambda_calculus.html#fv_coll"><span class="id" type="definition">fv_coll</span></a> (<span class="id" type="var">L</span> <a class="idref" href="lists_decidable.html#DecidableIn.::x_'\'_'{'_x_'}'"><span class="id" type="notation">\</span></a> <a class="idref" href="lists_decidable.html#DecidableIn.::x_'\'_'{'_x_'}'"><span class="id" type="notation">{</span></a><span class="id" type="var">x</span><a class="idref" href="lists_decidable.html#DecidableIn.::x_'\'_'{'_x_'}'"><span class="id" type="notation">}</span></a>) <span class="id" type="var">rho</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> <span class="id" type="var">z</span>, <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">y</span> <a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Init.Logic.html#:type_scope:x_'<>'_x"><span class="id" type="notation">&lt;&gt;</span></a> <span class="id" type="var">z</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">y</span> <a class="idref" href="lists_decidable.html#::x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="lambda_calculus.html#fv_coll"><span class="id" type="definition">fv_coll</span></a> <span class="id" type="var">L</span> (<span class="id" type="var">rho</span> <a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">[[</span></a><a class="idref" href="lambda_calculus.html#Var"><span class="id" type="constructor">Var</span></a> <span class="id" type="var">z</span> <a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">=&gt;</span></a> <span class="id" type="var">x</span><a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">]]</span></a>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">induction</span> <span class="id" type="var">L</span> <span class="id" type="keyword">as</span> [ | <span class="id" type="var">v</span> <span class="id" type="var">L'</span>]; <span class="id" type="tactic">simpl</span>; <span class="id" type="tactic">intros</span>; <span class="id" type="tactic">auto</span>. <span class="id" type="var">case_dec</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="var">Case</span> "x == v".<br/>
&nbsp;&nbsp;<span class="id" type="var">rewrite_up</span>; <span class="id" type="tactic">simpl</span>; <span class="id" type="tactic">red</span>; <span class="id" type="tactic">intro</span> <span class="id" type="var">Hor</span>; <span class="id" type="tactic">elim</span> <span class="id" type="var">Hor</span>; <span class="id" type="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">IHL'</span>; <span class="id" type="tactic">auto</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="var">Case</span> "x &lt;&gt; v".<br/>
&nbsp;&nbsp;<span class="id" type="var">rewrite_up</span>; <span class="id" type="tactic">auto</span>; <span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">repeat</span> <span class="id" type="var">destr_app</span>; <span class="id" type="tactic">split</span>; <span class="id" type="tactic">auto</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Corollary</span> <a name="C3_11"><span class="id" type="lemma">C3_11</span></a> : <span class="id" type="keyword">forall</span> (<span class="id" type="var">M</span> : <a class="idref" href="lambda_calculus.html#term"><span class="id" type="inductive">term</span></a>)(<span class="id" type="var">x</span> <span class="id" type="var">y</span> : <a class="idref" href="lambda_calculus.html#var"><span class="id" type="abbreviation">var</span></a>)(<span class="id" type="var">rho</span> : <a class="idref" href="lambda_calculus.html#substitution"><span class="id" type="definition">substitution</span></a>),<br/>
&nbsp;&nbsp;<span class="id" type="var">y</span> <a class="idref" href="lists_decidable.html#::x_'#'_x"><span class="id" type="notation">#</span></a> <a class="idref" href="lambda_calculus.html#old"><span class="id" type="definition">old</span></a> <span class="id" type="var">x</span> <span class="id" type="var">M</span> <span class="id" type="var">rho</span> -&gt;<br/>
&nbsp;&nbsp;<a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">(</span></a><a class="idref" href="lambda_calculus.html#Lam"><span class="id" type="constructor">Lam</span></a> <span class="id" type="var">x</span> <span class="id" type="var">M</span><a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">)</span></a> <a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><span class="id" type="var">rho</span><a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <a class="idref" href="lambda_calculus.html#::x_'Eq'_x"><span class="id" type="notation">Eq</span></a> <a class="idref" href="lambda_calculus.html#Lam"><span class="id" type="constructor">Lam</span></a> <span class="id" type="var">y</span> (<span class="id" type="var">M</span> <a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><span class="id" type="var">rho</span> <a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">[[</span></a><a class="idref" href="lambda_calculus.html#Var"><span class="id" type="constructor">Var</span></a> <span class="id" type="var">y</span> <a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">=&gt;</span></a> <span class="id" type="var">x</span><a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">]]</span></a><a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span>; <span class="id" type="tactic">simpl</span>; <span class="id" type="tactic">destruct</span> (<span class="id" type="var">y</span> <a class="idref" href="lists_decidable.html#DecidableIn.::x_'=='_x"><span class="id" type="notation">==</span></a> <a class="idref" href="fresh_variables.html#Nat.choice"><span class="id" type="definition">choice</span></a> (<a class="idref" href="lambda_calculus.html#old"><span class="id" type="definition">old</span></a> <span class="id" type="var">x</span> <span class="id" type="var">M</span> <span class="id" type="var">rho</span>)) <span class="id" type="keyword">as</span> [<span class="id" type="var">Heq</span> | <span class="id" type="var">Hneq</span>].<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="var">Case</span> "y = choice (old x M rho)".<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> &lt;- <span class="id" type="var">Heq</span>. <span class="id" type="tactic">apply</span> <a class="idref" href="lambda_calculus.html#a_cong_refl"><span class="id" type="lemma">a_cong_refl</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="var">Case</span> "y &lt;&gt; choice (old x M rho)".<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="lambda_calculus.html#al_lam_notin"><span class="id" type="constructor">al_lam_notin</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="var">SCase</span> "binder case".<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="lambda_calculus.html#fv_coll_subst"><span class="id" type="lemma">fv_coll_subst</span></a>. <span class="id" type="tactic">apply</span> <a class="idref" href="lambda_calculus.html#fv_coll_neq"><span class="id" type="lemma">fv_coll_neq</span></a>; <span class="id" type="tactic">auto</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="var">SCase</span> "body case".<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="lambda_calculus.html#a_cong_trans"><span class="id" type="lemma">a_cong_trans</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">N</span> := <span class="id" type="var">M</span> <a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><span class="id" type="var">rho</span> <a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">[[</span></a><a class="idref" href="lambda_calculus.html#Var"><span class="id" type="constructor">Var</span></a> <span class="id" type="var">y</span> <a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">=&gt;</span></a><span class="id" type="var">x</span><a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">]]</span></a><a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">auto</span> <span class="id" type="keyword">using</span> <a class="idref" href="lambda_calculus.html#C3_9"><span class="id" type="lemma">C3_9</span></a>, <a class="idref" href="fresh_variables.html#Nat.choice_fresh"><span class="id" type="lemma">choice_fresh</span></a>, <a class="idref" href="lambda_calculus.html#a_cong_refl"><span class="id" type="lemma">a_cong_refl</span></a>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab13"></a><h2 class="section">4. Substitution and denotational semantics</h2>

</div>
<div class="code">

<br/>
</div>

<div class="doc">
This section consists of a proof of the "substitution lemma"
   of denotational semantics. The denotational semantics is based
   on cpo's.
<ul>
<li> E, a cpo of <i>expression values</i>, is a nontrivial solution
     to the isomorphism equation E ~ E -&gt; E,

</li>
<li> and <span class="inlinecode"><span class="id" type="var">In</span> : (<span class="id" type="var">E</span> -&gt; <span class="id" type="var">E</span>) -&gt; <span class="id" type="var">E</span></span> and <span class="inlinecode"><span class="id" type="var">Out</span> : <span class="id" type="var">E</span> -&gt; (<span class="id" type="var">E</span> -&gt; <span class="id" type="var">E</span>)</span> are
     continuous functions such that
<ul>
<li> <span class="inlinecode"><span class="id" type="var">compose</span> <span class="id" type="var">Out</span> <span class="id" type="var">In</span> = <span class="id" type="var">id_</span>{<span class="id" type="var">E</span> -&gt; <span class="id" type="var">E</span>}</span> and

</li>
<li> <span class="inlinecode"><span class="id" type="var">compose</span> <span class="id" type="var">In</span> <span class="id" type="var">Out</span> = <span class="id" type="var">id_E</span></span>. 
</li>
</ul>

</li>
</ul>

</div>
<div class="code">

<br/>
</div>

<div class="doc">
Here we just assume that such a cpo <span class="inlinecode"><span class="id" type="var">E</span></span> with two continuous
   functions <span class="inlinecode"><span class="id" type="var">In</span></span> and <span class="inlinecode"><span class="id" type="var">Out</span></span> are given. 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Parameter</span> <a name="E"><span class="id" type="axiom">E</span></a> : <span class="id" type="keyword">Type</span>.<br/>

<br/>
<span class="id" type="keyword">Parameter</span> <a name="In"><span class="id" type="axiom">In</span></a> : (<a class="idref" href="lambda_calculus.html#E"><span class="id" type="axiom">E</span></a> -&gt; <a class="idref" href="lambda_calculus.html#E"><span class="id" type="axiom">E</span></a>) -&gt; <a class="idref" href="lambda_calculus.html#E"><span class="id" type="axiom">E</span></a>.<br/>
<span class="id" type="keyword">Parameter</span> <a name="Out"><span class="id" type="axiom">Out</span></a> : <a class="idref" href="lambda_calculus.html#E"><span class="id" type="axiom">E</span></a> -&gt; (<a class="idref" href="lambda_calculus.html#E"><span class="id" type="axiom">E</span></a> -&gt; <a class="idref" href="lambda_calculus.html#E"><span class="id" type="axiom">E</span></a>).<br/>

<br/>
<span class="id" type="keyword">Axiom</span> <a name="OutIn"><span class="id" type="axiom">OutIn</span></a> : <span class="id" type="keyword">forall</span> (<span class="id" type="var">f</span> : <a class="idref" href="lambda_calculus.html#E"><span class="id" type="axiom">E</span></a> -&gt; <a class="idref" href="lambda_calculus.html#E"><span class="id" type="axiom">E</span></a>), <a class="idref" href="lambda_calculus.html#Out"><span class="id" type="axiom">Out</span></a> (<a class="idref" href="lambda_calculus.html#In"><span class="id" type="axiom">In</span></a> <span class="id" type="var">f</span>) <a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <span class="id" type="var">f</span>.<br/>
<span class="id" type="keyword">Axiom</span> <a name="InOut"><span class="id" type="axiom">InOut</span></a> : <span class="id" type="keyword">forall</span> (<span class="id" type="var">x</span> : <a class="idref" href="lambda_calculus.html#E"><span class="id" type="axiom">E</span></a>), <a class="idref" href="lambda_calculus.html#In"><span class="id" type="axiom">In</span></a> (<a class="idref" href="lambda_calculus.html#Out"><span class="id" type="axiom">Out</span></a> <span class="id" type="var">x</span>) <a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <span class="id" type="var">x</span>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" type="var">U</span></span> is the cpo of environments <span class="inlinecode"><span class="id" type="var">var</span> -&gt; <span class="id" type="var">E</span></span>, ordered componentwise. 
</div>
<div class="code">

<br/>
<span class="id" type="var">Notation </span><a name="U"><span class="id" type="abbreviation">U</span></a> := (<a class="idref" href="lambda_calculus.html#var"><span class="id" type="abbreviation">var</span></a> -&gt; <a class="idref" href="lambda_calculus.html#E"><span class="id" type="axiom">E</span></a>).<br/>

<br/>
</div>

<div class="doc">
<a name="lab14"></a><h3 class="section">Definition of a denotational semantics</h3>

</div>
<div class="code">

<br/>
<span class="id" type="keyword">Fixpoint</span> <a name="DS"><span class="id" type="definition">DS</span></a> (<span class="id" type="var">M</span> : <a class="idref" href="lambda_calculus.html#term"><span class="id" type="inductive">term</span></a>) : <a class="idref" href="lambda_calculus.html#U"><span class="id" type="abbreviation">U</span></a> -&gt; <a class="idref" href="lambda_calculus.html#E"><span class="id" type="axiom">E</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">M</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="lambda_calculus.html#Var"><span class="id" type="constructor">Var</span></a> <span class="id" type="var">x</span>     =&gt; <span class="id" type="keyword">fun</span> <span class="id" type="var">tau</span> =&gt; <span class="id" type="var">tau</span> <span class="id" type="var">x</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="lambda_calculus.html#App"><span class="id" type="constructor">App</span></a> <span class="id" type="var">M1</span> <span class="id" type="var">M2</span> =&gt; <span class="id" type="keyword">fun</span> <span class="id" type="var">tau</span> =&gt; (<a class="idref" href="lambda_calculus.html#Out"><span class="id" type="axiom">Out</span></a> (<a class="idref" href="lambda_calculus.html#DS"><span class="id" type="definition">DS</span></a> <span class="id" type="var">M1</span> <span class="id" type="var">tau</span>)) (<a class="idref" href="lambda_calculus.html#DS"><span class="id" type="definition">DS</span></a> <span class="id" type="var">M2</span> <span class="id" type="var">tau</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="lambda_calculus.html#Lam"><span class="id" type="constructor">Lam</span></a> <span class="id" type="var">x</span> <span class="id" type="var">M'</span>  =&gt; <span class="id" type="keyword">fun</span> <span class="id" type="var">tau</span> =&gt; <a class="idref" href="lambda_calculus.html#In"><span class="id" type="axiom">In</span></a> (<span class="id" type="keyword">fun</span> <span class="id" type="var">e</span> =&gt; <a class="idref" href="lambda_calculus.html#DS"><span class="id" type="definition">DS</span></a> <span class="id" type="var">M'</span> (<span class="id" type="var">tau</span> <a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">[[</span></a><span class="id" type="var">e</span> <a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">=&gt;</span></a> <span class="id" type="var">x</span><a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">]]</span></a>))<br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
Composition of an environment <span class="inlinecode"><span class="id" type="var">tau</span></span> and a substitution <span class="inlinecode"><span class="id" type="var">rho</span></span> 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Definition</span> <a name="e_comp"><span class="id" type="definition">e_comp</span></a> (<span class="id" type="var">tau</span> : <a class="idref" href="lambda_calculus.html#U"><span class="id" type="abbreviation">U</span></a>) (<span class="id" type="var">rho</span> : <a class="idref" href="lambda_calculus.html#substitution"><span class="id" type="definition">substitution</span></a>) : <a class="idref" href="lambda_calculus.html#U"><span class="id" type="abbreviation">U</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">fun</span> <span class="id" type="var">x</span> =&gt; <a class="idref" href="lambda_calculus.html#DS"><span class="id" type="definition">DS</span></a> (<span class="id" type="var">rho</span> <span class="id" type="var">x</span>) <span class="id" type="var">tau</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="L4_1"><span class="id" type="lemma">L4_1</span></a> : <span class="id" type="keyword">forall</span> (<span class="id" type="var">M</span> : <a class="idref" href="lambda_calculus.html#term"><span class="id" type="inductive">term</span></a>)(<span class="id" type="var">tau1</span> <span class="id" type="var">tau2</span> : <a class="idref" href="lambda_calculus.html#U"><span class="id" type="abbreviation">U</span></a>),<br/>
&nbsp;&nbsp;<a class="idref" href="lambda_calculus.html#Nat_dec.f_ext"><span class="id" type="definition">f_ext</span></a> <span class="id" type="var">tau1</span> <span class="id" type="var">tau2</span> (<a class="idref" href="lambda_calculus.html#FV"><span class="id" type="definition">FV</span></a> <span class="id" type="var">M</span>) -&gt;<br/>
&nbsp;&nbsp;<a class="idref" href="lambda_calculus.html#DS"><span class="id" type="definition">DS</span></a> <span class="id" type="var">M</span> <span class="id" type="var">tau1</span> <a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="lambda_calculus.html#DS"><span class="id" type="definition">DS</span></a> <span class="id" type="var">M</span> <span class="id" type="var">tau2</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <span class="id" type="var">f_ext</span>; <span class="id" type="tactic">induction</span> <span class="id" type="var">M</span> <span class="id" type="keyword">as</span> [ | | <span class="id" type="var">x</span> <span class="id" type="var">M</span>]; <span class="id" type="tactic">simpl</span>; <span class="id" type="tactic">intros</span>; <span class="id" type="tactic">auto</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="var">Case</span> "M = App M1 M2".<br/>
&nbsp;&nbsp;<span class="id" type="tactic">f_equal</span>; <span class="id" type="tactic">eauto</span> <span class="id" type="keyword">with</span> <span class="id" type="var">datatypes</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="var">Case</span> "M = Lam x M".<br/>
&nbsp;&nbsp;<span class="id" type="tactic">f_equal</span>. <span class="id" type="tactic">extensionality</span> <span class="id" type="var">e</span>. <span class="id" type="tactic">apply</span> <span class="id" type="var">IHM</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">x0</span> <span class="id" type="var">Hin</span>; <span class="id" type="tactic">unfold</span> <span class="id" type="var">up</span>; <span class="id" type="var">case_dec</span>; <span class="id" type="tactic">eauto</span> <span class="id" type="keyword">with</span> <span class="id" type="var">datatypes</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Semantic Substitution Theorem: semantic analogue of <span class="inlinecode"><span class="id" type="var">T3_2</span></span> 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Theorem</span> <a name="T4_2"><span class="id" type="lemma">T4_2</span></a> : <span class="id" type="keyword">forall</span> (<span class="id" type="var">M</span> : <a class="idref" href="lambda_calculus.html#term"><span class="id" type="inductive">term</span></a>)(<span class="id" type="var">rho</span> : <a class="idref" href="lambda_calculus.html#substitution"><span class="id" type="definition">substitution</span></a>)(<span class="id" type="var">tau</span> : <a class="idref" href="lambda_calculus.html#U"><span class="id" type="abbreviation">U</span></a>),<br/>
&nbsp;&nbsp;<a class="idref" href="lambda_calculus.html#DS"><span class="id" type="definition">DS</span></a> (<span class="id" type="var">M</span> <a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><span class="id" type="var">rho</span><a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a>) <span class="id" type="var">tau</span> <a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="lambda_calculus.html#DS"><span class="id" type="definition">DS</span></a> <span class="id" type="var">M</span> (<a class="idref" href="lambda_calculus.html#e_comp"><span class="id" type="definition">e_comp</span></a> <span class="id" type="var">tau</span> <span class="id" type="var">rho</span>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">induction</span> <span class="id" type="var">M</span> <span class="id" type="keyword">as</span> [ | | <span class="id" type="var">x</span> <span class="id" type="var">M</span>]; <span class="id" type="tactic">simpl</span>; <span class="id" type="tactic">intros</span>; <span class="id" type="tactic">f_equal</span>; <span class="id" type="tactic">auto</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="var">Case</span> "M = Lam x M".<br/>
&nbsp;&nbsp;<span class="id" type="var">remember</span> (<a class="idref" href="fresh_variables.html#Nat.choice"><span class="id" type="definition">choice</span></a> (<a class="idref" href="lambda_calculus.html#old"><span class="id" type="definition">old</span></a> <span class="id" type="var">x</span> <span class="id" type="var">M</span> <span class="id" type="var">rho</span>)) <span class="id" type="keyword">as</span> <span class="id" type="var">y</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">extensionality</span> <span class="id" type="var">e</span>. <span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHM</span>. <span class="id" type="tactic">apply</span> <a class="idref" href="lambda_calculus.html#L4_1"><span class="id" type="lemma">L4_1</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <span class="id" type="var">f_ext</span>, <span class="id" type="var">e_comp</span>, <span class="id" type="var">up</span>; <span class="id" type="tactic">intros</span> <span class="id" type="var">z</span> <span class="id" type="var">Hz</span>; <span class="id" type="var">case_dec</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="var">SCase</span> "z = x".<br/>
&nbsp;&nbsp;<span class="id" type="tactic">simpl</span>; <span class="id" type="var">case_dec</span>; <span class="id" type="tactic">intuition</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="var">SCase</span> "z &lt;&gt; x".<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="lambda_calculus.html#L4_1"><span class="id" type="lemma">L4_1</span></a>; <span class="id" type="tactic">unfold</span> <span class="id" type="var">f_ext</span>; <span class="id" type="tactic">intros</span> <span class="id" type="var">w</span> <span class="id" type="var">Hw</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">cut</span> (<span class="id" type="var">w</span> <a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Init.Logic.html#:type_scope:x_'<>'_x"><span class="id" type="notation">&lt;&gt;</span></a> <span class="id" type="var">y</span>); <span class="id" type="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" type="var">case_dec</span>; <span class="id" type="tactic">intuition</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" type="tactic">apply</span> (@<a class="idref" href="lambda_calculus.html#fv_coll_notin_1"><span class="id" type="lemma">fv_coll_notin_1</span></a> (<a class="idref" href="lambda_calculus.html#FV"><span class="id" type="definition">FV</span></a> <span class="id" type="var">M</span>) <span class="id" type="var">x</span> <span class="id" type="var">z</span> <span class="id" type="var">w</span> <span class="id" type="var">y</span> <span class="id" type="var">rho</span>); <span class="id" type="tactic">auto</span>; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <span class="id" type="var">old</span> <span class="id" type="keyword">in</span> *; <span class="id" type="tactic">subst</span> <span class="id" type="var">y</span>; <span class="id" type="tactic">auto</span> <span class="id" type="keyword">using</span> <a class="idref" href="fresh_variables.html#Nat.choice_fresh"><span class="id" type="lemma">choice_fresh</span></a>].<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Corollary</span> <a name="C4_3"><span class="id" type="lemma">C4_3</span></a> : <span class="id" type="keyword">forall</span> (<span class="id" type="var">M</span> <span class="id" type="var">N</span> : <a class="idref" href="lambda_calculus.html#term"><span class="id" type="inductive">term</span></a>)(<span class="id" type="var">x</span> : <a class="idref" href="lambda_calculus.html#var"><span class="id" type="abbreviation">var</span></a>)(<span class="id" type="var">tau</span> : <a class="idref" href="lambda_calculus.html#U"><span class="id" type="abbreviation">U</span></a>), <br/>
&nbsp;&nbsp;<a class="idref" href="lambda_calculus.html#DS"><span class="id" type="definition">DS</span></a> (<span class="id" type="var">M</span> <a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><a class="idref" href="lambda_calculus.html#iota"><span class="id" type="abbreviation">iota</span></a> <a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">[[</span></a><span class="id" type="var">N</span> <a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">=&gt;</span></a> <span class="id" type="var">x</span><a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">]]</span></a> <a class="idref" href="lambda_calculus.html#::x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a>) <span class="id" type="var">tau</span> <a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="lambda_calculus.html#DS"><span class="id" type="definition">DS</span></a> <span class="id" type="var">M</span> (<span class="id" type="var">tau</span> <a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">[[</span></a><a class="idref" href="lambda_calculus.html#DS"><span class="id" type="definition">DS</span></a> <span class="id" type="var">N</span> <span class="id" type="var">tau</span> <a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">=&gt;</span></a> <span class="id" type="var">x</span><a class="idref" href="functions_extra.html#FunctionExtra.::x_'[['_x_'=>'_x_']]'"><span class="id" type="notation">]]</span></a>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span>; <span class="id" type="tactic">rewrite</span> <a class="idref" href="lambda_calculus.html#T4_2"><span class="id" type="lemma">T4_2</span></a>. <span class="id" type="tactic">apply</span> <a class="idref" href="lambda_calculus.html#L4_1"><span class="id" type="lemma">L4_1</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <span class="id" type="var">f_ext</span>, <span class="id" type="var">e_comp</span>, <span class="id" type="var">up</span>; <span class="id" type="tactic">intros</span>; <span class="id" type="var">case_dec</span>; <span class="id" type="tactic">auto</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Corollary</span> <a name="C4_4_i"><span class="id" type="lemma">C4_4_i</span></a> : <span class="id" type="keyword">forall</span> (<span class="id" type="var">tau</span> : <a class="idref" href="lambda_calculus.html#U"><span class="id" type="abbreviation">U</span></a>),<br/>
&nbsp;&nbsp;<a class="idref" href="lambda_calculus.html#e_comp"><span class="id" type="definition">e_comp</span></a> <span class="id" type="var">tau</span> <a class="idref" href="lambda_calculus.html#iota"><span class="id" type="abbreviation">iota</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <span class="id" type="var">tau</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <span class="id" type="var">e_comp</span>; <span class="id" type="tactic">simpl</span>; <span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">extensionality</span> <span class="id" type="var">x</span>; <span class="id" type="tactic">auto</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Corollary</span> <a name="C4_4_ii"><span class="id" type="lemma">C4_4_ii</span></a> : <span class="id" type="keyword">forall</span> (<span class="id" type="var">tau</span> : <a class="idref" href="lambda_calculus.html#U"><span class="id" type="abbreviation">U</span></a>)(<span class="id" type="var">rho1</span> <span class="id" type="var">rho2</span> : <a class="idref" href="lambda_calculus.html#substitution"><span class="id" type="definition">substitution</span></a>),<br/>
&nbsp;&nbsp;<a class="idref" href="lambda_calculus.html#e_comp"><span class="id" type="definition">e_comp</span></a> <span class="id" type="var">tau</span> (<a class="idref" href="lambda_calculus.html#comp"><span class="id" type="definition">comp</span></a> <span class="id" type="var">rho2</span> <span class="id" type="var">rho1</span>) <a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="lambda_calculus.html#e_comp"><span class="id" type="definition">e_comp</span></a> (<a class="idref" href="lambda_calculus.html#e_comp"><span class="id" type="definition">e_comp</span></a> <span class="id" type="var">tau</span> <span class="id" type="var">rho2</span>) <span class="id" type="var">rho1</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <span class="id" type="var">e_comp</span>, <span class="id" type="var">comp</span>; <span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">extensionality</span> <span class="id" type="var">x</span>. <span class="id" type="tactic">rewrite</span> <a class="idref" href="lambda_calculus.html#T4_2"><span class="id" type="lemma">T4_2</span></a>; <span class="id" type="tactic">reflexivity</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Corollary</span> <a name="C4_5"><span class="id" type="lemma">C4_5</span></a> : <span class="id" type="keyword">forall</span> (<span class="id" type="var">M</span> <span class="id" type="var">N</span> : <a class="idref" href="lambda_calculus.html#term"><span class="id" type="inductive">term</span></a>),<br/>
&nbsp;&nbsp;<span class="id" type="var">M</span> <a class="idref" href="lambda_calculus.html#::x_'Eq'_x"><span class="id" type="notation">Eq</span></a> <span class="id" type="var">N</span> -&gt;<br/>
&nbsp;&nbsp;<a class="idref" href="lambda_calculus.html#DS"><span class="id" type="definition">DS</span></a> <span class="id" type="var">M</span> <a class="idref" href="http://coq.inria.fr/distrib/8.3pl4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="lambda_calculus.html#DS"><span class="id" type="definition">DS</span></a> <span class="id" type="var">N</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span>; <span class="id" type="tactic">extensionality</span> <span class="id" type="var">tau</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">pattern</span> <span class="id" type="var">tau</span>; <span class="id" type="tactic">rewrite</span> &lt;- <a class="idref" href="lambda_calculus.html#C4_4_i"><span class="id" type="lemma">C4_4_i</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">repeat</span> <span class="id" type="tactic">rewrite</span> &lt;- <a class="idref" href="lambda_calculus.html#T4_2"><span class="id" type="lemma">T4_2</span></a>; <span class="id" type="tactic">f_equal</span>; <span class="id" type="tactic">apply</span> (<a class="idref" href="lambda_calculus.html#C3_6_i"><span class="id" type="lemma">C3_6_i</span></a>); <span class="id" type="tactic">auto</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>